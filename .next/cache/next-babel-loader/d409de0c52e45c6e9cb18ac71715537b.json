{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/admin/Desktop/tcrb-ob-project/tcrb-ob-backoffice-frontend/components/customer-services-menu/account-unbinding.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport SimpleSearch from '../simple-search';\nimport SimpleSwitch from '../simple-switch';\nimport styled from 'styled-components';\nimport { Row, Switch, Col, Button, Input } from 'antd';\nimport SimpleModal from '../simple-modal';\nimport { inject, observer } from 'mobx-react';\nimport { toJS } from 'mobx';\nimport { withTranslation } from '../../i18n';\nvar StyledA = styled.a.withConfig({\n  displayName: \"account-unbinding__StyledA\",\n  componentId: \"sc-1wve73-0\"\n})([\"display:initial;padding-right:\", \"px !important;color:#F88008 !important;text-decoration-color:#F88008;text-decoration-line:underline;\"], function (_ref) {\n  var theme = _ref.theme;\n  return theme.spacing.medium;\n});\n_c = StyledA;\nvar StyledP = styled.p.withConfig({\n  displayName: \"account-unbinding__StyledP\",\n  componentId: \"sc-1wve73-1\"\n})([\"display:initial;padding-left:\", \"px !important;\"], function (_ref2) {\n  var theme = _ref2.theme;\n  return theme.spacing.medium;\n});\nvar StyledSpan = styled.span.withConfig({\n  displayName: \"account-unbinding__StyledSpan\",\n  componentId: \"sc-1wve73-2\"\n})([\"display:initial;padding-left:\", \"px !important;\"], function (_ref3) {\n  var theme = _ref3.theme;\n  return theme.spacing.medium;\n});\n_c2 = StyledSpan;\nvar StyledInput = styled(Input).withConfig({\n  displayName: \"account-unbinding__StyledInput\",\n  componentId: \"sc-1wve73-3\"\n})([\"\", \"\"], function (_ref4) {\n  var readOnly = _ref4.readOnly;\n  return readOnly && \"\\n          border-style: solid !important;\\n          border-width: 0px 0px 1px 0px !important;\\n          border-color: black !important;\\n          box-shadow: none !important;\\n          border-right-style: unset !important;\\n          border-right-width: 0px !important\\n      \";\n});\n_c3 = StyledInput;\nvar AccountUnbinding = inject('customerServicesMenuStore')(observer(_s(function (props) {\n  _s();\n\n  var _useState = useState(false),\n      isSearch = _useState[0],\n      setIsSearch = _useState[1];\n\n  var _useState2 = useState(false),\n      viewDetail = _useState2[0],\n      setViewDetail = _useState2[1];\n\n  var _useState3 = useState(false),\n      visible = _useState3[0],\n      setVisble = _useState3[1];\n\n  var _useState4 = useState(''),\n      modalString = _useState4[0],\n      setModalString = _useState4[1];\n\n  var _useState5 = useState(''),\n      accountId = _useState5[0],\n      setAccountId = _useState5[1]; // const stringSwitch = [{ accountName: i18n.t(\"bindingTCRBMobilBanking\"), accountBindingStatus: true, accountType: '1' }, { accountName: i18n.t(\"bindingMicroPay\"), accountBindingStatus: true, accountType: '2' }, { accountName: i18n.t(\"bindingTrueMoneyWallet\"), accountBindingStatus: true, accountType: '3' }]\n  // const stringAccount = [{ accountNumber: '2233344514', accountName: i18n.t(\"normalSaving\"), accountType: '1' }, { accountNumber: '123456789032', accountName: i18n.t(\"revolvingLoanNonTCG\"), accountType: '2' }]\n\n\n  var mockData = [{\n    accountName: 'Binding to TCRB Mobile Banking',\n    accountBindingStatus: true,\n    accountType: '1',\n    main_account_no: '22223425566'\n  }, {\n    accountName: 'Binding to Micro Pay',\n    accountBindingStatus: true,\n    accountType: '2',\n    main_account_no: '554432268776'\n  }, {\n    accountName: 'Binding to True Money Wallet',\n    accountBindingStatus: true,\n    accountType: '3',\n    main_account_no: '11445677543'\n  }];\n\n  var _useState6 = useState([]),\n      stringAccount = _useState6[0],\n      setStringAccount = _useState6[1];\n\n  var _useState7 = useState([]),\n      stringSwitch = _useState7[0],\n      setStringSwitch = _useState7[1];\n\n  var customerServicesMenuStore = props.customerServicesMenuStore,\n      t = props.t;\n  useEffect(function () {\n    if (isSearch) {\n      setStringAccount(customerServicesMenuStore.accountInfo);\n    }\n  }, [customerServicesMenuStore.accountInfo]);\n  useEffect(function () {\n    if (isSearch) {\n      if (customerServicesMenuStore.unbindAccountInfo) {\n        convertArrayObjectToArray(customerServicesMenuStore.unbindAccountInfo).then(function (result) {\n          console.log(result);\n          customerServicesMenuStore.arrayUnbindAccountInfo = result; // setStringSwitch(result)\n\n          setStringSwitch(result);\n        });\n      }\n    }\n  }, [customerServicesMenuStore.unbindAccountInfo]);\n\n  var searchIdCardNumber = /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(value) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              // console.log('eiei search:' + value)\n              // setIdCard(value)\n              setIsSearch(true); // customerServicesMenuStore.setCitizenId(value)\n\n              _context.next = 3;\n              return customerServicesMenuStore.getDataAccountUnbind(value);\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function searchIdCardNumber(_x) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n\n  var backSearch = /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setViewDetail(false);\n              setIsSearch(false);\n              setStringAccount([]);\n\n            case 3:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function backSearch() {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n\n  var convertArrayObjectToArray = function convertArrayObjectToArray(arrayObject) {\n    return new Promise(function (resolve, reject) {\n      var result = arrayObject.map(function (accountDetail) {\n        return [accountDetail.binding_status == '1' ? true : false, accountDetail.partner_name_english];\n      });\n      resolve(result);\n    });\n  };\n\n  var selectAccount = /*#__PURE__*/function () {\n    var _ref7 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(selectedAccount) {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              console.log(toJS(selectedAccount));\n              customerServicesMenuStore.setAccountId(selectedAccount.main_account_no);\n              _context3.next = 4;\n              return customerServicesMenuStore.getDataAccountProduct(selectedAccount.main_account_no);\n\n            case 4:\n              setViewDetail(true);\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function selectAccount(_x2) {\n      return _ref7.apply(this, arguments);\n    };\n  }();\n\n  var _onChange = function onChange(switchSelected, index) {\n    console.log(\"indexOf :\" + index, switchSelected);\n    console.log(toJS(customerServicesMenuStore.unbindAccountInfo[index]));\n    var accountSelected = customerServicesMenuStore.unbindAccountInfo[index];\n\n    if (switchSelected === true) {\n      setVisble(true);\n\n      switch (accountSelected.partner_code) {\n        case \"TMDS\":\n          setModalString(__jsx(\"div\", {\n            style: {\n              textAlign: \"center\"\n            },\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 17\n            }\n          }, __jsx(\"p\", {\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 19\n            }\n          }, t(\"unbinding\")), __jsx(\"p\", {\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 19\n            }\n          }, \" \", t(\"account\") + \" \" + accountSelected.main_account_no, \" from Micro Pay\")));\n          break;\n        // case '2':\n        //   setModalString(\n        //     <div style={{ textAlign: \"center\" }}>\n        //       <p>{t(\"unbinding\")}</p>\n        //       <p> {t(\"account\") + \" \" + customerServicesMenuStore.accountId} from Micro Pay</p>\n        //     </div>\n        //   )\n        //   break;\n        // case '3':\n        //   setModalString(\n        //     <div style={{ textAlign: \"center\" }}>\n        //       <p>{t(\"unbinding\")}</p>\n        //       <p> {t(\"account\") + \" \" + customerServicesMenuStore.accountId} from True Money Wallet</p>\n        //     </div>\n        //   )\n        //   break;\n        // default:\n        //   break;\n      }\n    } else {// setIsChecked(false)\n      }\n  };\n\n  var unBindingAccount = /*#__PURE__*/function () {\n    var _ref8 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              setVisble(false); // call api\n\n              _context4.next = 3;\n              return customerServicesMenuStore.submitAccountUnbiding();\n\n            case 3:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function unBindingAccount() {\n      return _ref8.apply(this, arguments);\n    };\n  }();\n\n  var AccountList = function AccountList() {\n    var listItems = stringAccount.map(function (string, index) {\n      return __jsx(Row, {\n        key: index,\n        gutter: [4, 24],\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }\n      }, __jsx(Col, {\n        span: 24,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 13\n        }\n      }, __jsx(StyledA, {\n        onClick: function onClick() {\n          selectAccount(string);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 15\n        }\n      }, string.main_account_no), __jsx(StyledSpan, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 100\n        }\n      }, \" \", string.product_name_english)));\n    });\n    return __jsx(\"ul\", {\n      style: {\n        paddingInlineStart: 0\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 11\n      }\n    }, listItems);\n  };\n\n  var newSearch = __jsx(\"div\", {\n    style: {\n      margin: 20\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 9\n    }\n  }, __jsx(Row, {\n    gutter: [4, 24],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 11\n    }\n  }, __jsx(SimpleSearch, {\n    search: searchIdCardNumber,\n    prefixWording: t(\"idCard\"),\n    loading: customerServicesMenuStore.searchFetching,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 13\n    }\n  })), isSearch ? __jsx(AccountList, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 13\n    }\n  }) : '');\n\n  var accountDetail = __jsx(\"div\", {\n    style: {\n      margin: 20\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 9\n    }\n  }, __jsx(Row, {\n    gutter: [4, 24],\n    align: \"top\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 11\n    }\n  }, __jsx(Col, {\n    span: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 13\n    }\n  }, __jsx(StyledInput, {\n    readOnly: true,\n    prefix: t('accountNumber'),\n    defaultValue: customerServicesMenuStore.accountId,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 15\n    }\n  }))), __jsx(Row, {\n    gutter: [4, 24],\n    align: \"middle\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 11\n    }\n  }, __jsx(SimpleSwitch, {\n    data: stringSwitch,\n    onChange: function onChange(switchSelected, index) {\n      return _onChange(switchSelected, index);\n    },\n    isBinding: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 13\n    }\n  }), __jsx(SimpleModal, {\n    onOk: function onOk() {\n      return unBindingAccount();\n    },\n    onCancel: function onCancel() {\n      return setVisble(false);\n    },\n    okText: \"Confirm\",\n    cancelText: \"Cancel\",\n    modalString: modalString,\n    visible: visible,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 13\n    }\n  })), __jsx(Row, {\n    gutter: [4, 24],\n    align: \"bottom\",\n    justify: \"center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 11\n    }\n  }, __jsx(Col, {\n    span: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 13\n    }\n  }, __jsx(Button, {\n    shape: \"round\",\n    onClick: function onClick() {\n      return backSearch();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 15\n    }\n  }, \"Back\"))));\n\n  return viewDetail ? accountDetail : newSearch;\n}, \"tdtjveJbQc0HzjRAFd8wVLwKGV0=\")));\nexport default withTranslation('common')(AccountUnbinding);\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"StyledA\");\n$RefreshReg$(_c2, \"StyledSpan\");\n$RefreshReg$(_c3, \"StyledInput\");","map":{"version":3,"sources":["/Users/admin/Desktop/tcrb-ob-project/tcrb-ob-backoffice-frontend/components/customer-services-menu/account-unbinding.js"],"names":["React","useState","useEffect","SimpleSearch","SimpleSwitch","styled","Row","Switch","Col","Button","Input","SimpleModal","inject","observer","toJS","withTranslation","StyledA","a","theme","spacing","medium","StyledP","p","StyledSpan","span","StyledInput","readOnly","AccountUnbinding","props","isSearch","setIsSearch","viewDetail","setViewDetail","visible","setVisble","modalString","setModalString","accountId","setAccountId","mockData","accountName","accountBindingStatus","accountType","main_account_no","stringAccount","setStringAccount","stringSwitch","setStringSwitch","customerServicesMenuStore","t","accountInfo","unbindAccountInfo","convertArrayObjectToArray","then","result","console","log","arrayUnbindAccountInfo","searchIdCardNumber","value","getDataAccountUnbind","backSearch","arrayObject","Promise","resolve","reject","map","accountDetail","binding_status","partner_name_english","selectAccount","selectedAccount","getDataAccountProduct","onChange","switchSelected","index","accountSelected","partner_code","textAlign","unBindingAccount","submitAccountUnbiding","AccountList","listItems","string","product_name_english","paddingInlineStart","newSearch","margin","searchFetching"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport SimpleSearch from '../simple-search'\nimport SimpleSwitch from '../simple-switch'\nimport styled from 'styled-components'\nimport { Row, Switch, Col, Button, Input } from 'antd';\nimport SimpleModal from '../simple-modal'\nimport { inject, observer } from 'mobx-react'\nimport { toJS } from 'mobx';\nimport { withTranslation } from '../../i18n'\n\nconst StyledA = styled.a`\n  display: initial;\n  padding-right: ${({ theme }) => theme.spacing.medium}px !important;\n  color: #F88008 !important;\n  text-decoration-color: #F88008;\n  text-decoration-line: underline;\n`\nconst StyledP = styled.p`\n  display: initial;\n  padding-left: ${({ theme }) => theme.spacing.medium}px !important;\n`\nconst StyledSpan = styled.span`\n\n  display: initial;\n  padding-left: ${({ theme }) => theme.spacing.medium}px !important;\n`\nconst StyledInput = styled(Input)`\n      ${({ readOnly }) => readOnly && `\n          border-style: solid !important;\n          border-width: 0px 0px 1px 0px !important;\n          border-color: black !important;\n          box-shadow: none !important;\n          border-right-style: unset !important;\n          border-right-width: 0px !important\n      `}\n`\nconst AccountUnbinding =\n  inject('customerServicesMenuStore')\n    (observer((props) => {\n      const [isSearch, setIsSearch] = useState(false);\n      const [viewDetail, setViewDetail] = useState(false);\n      const [visible, setVisble] = useState(false)\n      const [modalString, setModalString] = useState('')\n      const [accountId, setAccountId] = useState('')\n      // const stringSwitch = [{ accountName: i18n.t(\"bindingTCRBMobilBanking\"), accountBindingStatus: true, accountType: '1' }, { accountName: i18n.t(\"bindingMicroPay\"), accountBindingStatus: true, accountType: '2' }, { accountName: i18n.t(\"bindingTrueMoneyWallet\"), accountBindingStatus: true, accountType: '3' }]\n      // const stringAccount = [{ accountNumber: '2233344514', accountName: i18n.t(\"normalSaving\"), accountType: '1' }, { accountNumber: '123456789032', accountName: i18n.t(\"revolvingLoanNonTCG\"), accountType: '2' }]\n      const mockData = [{ accountName: 'Binding to TCRB Mobile Banking', accountBindingStatus: true, accountType: '1', main_account_no: '22223425566' }, { accountName: 'Binding to Micro Pay', accountBindingStatus: true, accountType: '2', main_account_no: '554432268776' }, { accountName: 'Binding to True Money Wallet', accountBindingStatus: true, accountType: '3', main_account_no: '11445677543' }]\n      const [stringAccount, setStringAccount] = useState([])\n      const [stringSwitch, setStringSwitch] = useState([])\n      const { customerServicesMenuStore, t } = props\n\n      useEffect(() => {\n        if (isSearch) {\n          setStringAccount(customerServicesMenuStore.accountInfo)\n        }\n      }, [customerServicesMenuStore.accountInfo])\n\n      useEffect(() => {\n        if (isSearch) {\n          if (customerServicesMenuStore.unbindAccountInfo) {\n            convertArrayObjectToArray(customerServicesMenuStore.unbindAccountInfo).then(result => {\n              console.log(result)\n              customerServicesMenuStore.arrayUnbindAccountInfo = result\n              // setStringSwitch(result)\n              setStringSwitch(result)\n            })\n          }\n        }\n      }, [customerServicesMenuStore.unbindAccountInfo])\n\n      const searchIdCardNumber = async (value) => {\n        // console.log('eiei search:' + value)\n        // setIdCard(value)\n        setIsSearch(true)\n        // customerServicesMenuStore.setCitizenId(value)\n        await customerServicesMenuStore.getDataAccountUnbind(value)\n\n      }\n\n      const backSearch = async () => {\n        setViewDetail(false)\n        setIsSearch(false)\n        setStringAccount([])\n      }\n\n      const convertArrayObjectToArray = (arrayObject) => {\n        return new Promise((resolve, reject) => {\n          let result = arrayObject.map(accountDetail => [(accountDetail.binding_status == '1') ? true : false, accountDetail.partner_name_english]);\n          resolve(result)\n        })\n      }\n\n      const selectAccount = async (selectedAccount) => {\n        console.log(toJS(selectedAccount))\n        customerServicesMenuStore.setAccountId(selectedAccount.main_account_no)\n        await customerServicesMenuStore.getDataAccountProduct(selectedAccount.main_account_no)\n        setViewDetail(true)\n\n      }\n      const onChange = (switchSelected, index) => {\n        console.log(\"indexOf :\" + index, switchSelected)\n        console.log(toJS(customerServicesMenuStore.unbindAccountInfo[index]))\n        let accountSelected = customerServicesMenuStore.unbindAccountInfo[index]\n\n        if (switchSelected === true) {\n          setVisble(true)\n          switch (accountSelected.partner_code) {\n            case \"TMDS\":\n              setModalString(\n                <div style={{ textAlign: \"center\" }}>\n                  <p>{t(\"unbinding\")}</p>\n                  <p> {t(\"account\") + \" \" + accountSelected.main_account_no} from Micro Pay</p>\n                </div>\n              )\n              break;\n            // case '2':\n            //   setModalString(\n            //     <div style={{ textAlign: \"center\" }}>\n            //       <p>{t(\"unbinding\")}</p>\n            //       <p> {t(\"account\") + \" \" + customerServicesMenuStore.accountId} from Micro Pay</p>\n            //     </div>\n            //   )\n            //   break;\n            // case '3':\n            //   setModalString(\n            //     <div style={{ textAlign: \"center\" }}>\n            //       <p>{t(\"unbinding\")}</p>\n            //       <p> {t(\"account\") + \" \" + customerServicesMenuStore.accountId} from True Money Wallet</p>\n            //     </div>\n            //   )\n            //   break;\n            // default:\n            //   break;\n          }\n        } else {\n          // setIsChecked(false)\n        }\n      }\n\n      const unBindingAccount = async () => {\n        setVisble(false)\n        // call api\n        await customerServicesMenuStore.submitAccountUnbiding()\n      }\n\n      const AccountList = () => {\n        const listItems = stringAccount.map((string, index) =>\n          <Row key={index} gutter={[4, 24]}>\n            <Col span={24}>\n              <StyledA onClick={() => { selectAccount(string) }}>{string.main_account_no}</StyledA><StyledSpan> {string.product_name_english}</StyledSpan>\n\n            </Col>\n          </Row>\n        );\n        return (\n          <ul style={{ paddingInlineStart: 0 }}>{listItems}</ul>\n        );\n      }\n      const newSearch = (\n        <div style={{ margin: 20 }}>\n          <Row gutter={[4, 24]}>\n            <SimpleSearch search={searchIdCardNumber} prefixWording={t(\"idCard\")} loading={customerServicesMenuStore.searchFetching} />\n          </Row>\n          {(isSearch) ? (\n            <AccountList />\n          ) : ('')}\n        </div>)\n\n      const accountDetail = (\n        <div style={{ margin: 20 }}>\n          {/* <Row gutter={[4, 24]}>\n        <Button onClick={() => setViewDetail(false)}>{i18n.t(\"back\")}</Button>\n      </Row> */}\n          <Row gutter={[4, 24]} align=\"top\">\n            <Col span={6}>\n              <StyledInput readOnly={true} prefix={t('accountNumber')} defaultValue={customerServicesMenuStore.accountId} />\n\n            </Col>\n          </Row>\n          <Row gutter={[4, 24]} align=\"middle\">\n            {/* <SwitchList /> */}\n            <SimpleSwitch\n              data={stringSwitch}\n              onChange={(switchSelected, index) => onChange(switchSelected, index)}\n              isBinding={true}\n            />\n            <SimpleModal\n              onOk={() => unBindingAccount()}\n              onCancel={() => setVisble(false)}\n              okText=\"Confirm\"\n              cancelText=\"Cancel\"\n              modalString={modalString}\n              visible={visible}\n            />\n          </Row>\n\n          <Row gutter={[4, 24]} align=\"bottom\" justify=\"center\">\n            <Col span={6}>\n              <Button shape=\"round\" onClick={() => backSearch()}>Back</Button>\n\n            </Col>\n          </Row>\n        </div>\n      )\n      return (viewDetail) ? accountDetail : newSearch\n    }))\nexport default withTranslation('common')(AccountUnbinding)\n"]},"metadata":{},"sourceType":"module"}