{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/admin/Desktop/tcrb-ob-project/tcrb-ob-backoffice-frontend/components/business-parameters-setup/product-limit-setup/manage-partner.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from 'react';\nimport { inject, observer } from 'mobx-react';\nimport { withTranslation } from '../../../i18n';\nimport { Table, Row, Col, Menu, Card, Input, Select, Form, InputNumber, Divider, Popconfirm, Space } from 'antd';\nimport { DeleteOutlined, EditOutlined, FormOutlined } from '@ant-design/icons';\nimport { TcrbButton, TcrbPopconfirm } from '../../antd-styles/styles';\nimport { addKeyToDataSource, addCommaInData } from '../../data-utility';\nimport SimpleInput from '../../simple-input';\nimport SimpleModal from '../../simple-modal';\nimport { toJS } from 'mobx';\nvar managePartner = inject('businessParametersSetupStore')(observer(_s(function (props) {\n  _s();\n\n  var businessParametersSetupStore = props.businessParametersSetupStore,\n      t = props.t;\n\n  var _Form$useForm = Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  var _useState = useState(''),\n      editingKey = _useState[0],\n      setEditingKey = _useState[1];\n\n  var isEditing = function isEditing(record) {\n    return record.key === editingKey;\n  };\n\n  var _useState2 = useState([]),\n      mockDataPartnerList = _useState2[0],\n      setMockDataPartnerList = _useState2[1];\n\n  var _useState3 = useState(true),\n      isEnableEditButton = _useState3[0],\n      setIsEnableEditButton = _useState3[1];\n\n  var _useState4 = useState(false),\n      visible = _useState4[0],\n      setVisble = _useState4[1];\n\n  var _useState5 = useState(''),\n      modalString = _useState5[0],\n      setModalString = _useState5[1];\n\n  var _useState6 = useState(''),\n      titleModal = _useState6[0],\n      setTitleModal = _useState6[1];\n\n  var _useState7 = useState(''),\n      modalType = _useState7[0],\n      setModalType = _useState7[1]; // var mockDataPartnerList = []\n\n\n  useEffect(function () {\n    addKeyToDataSource(businessParametersSetupStore.channelPartnerList).then(function (result) {\n      // mockDataPartnerList = result\n      setMockDataPartnerList(result);\n    });\n  }, []);\n\n  var edit = function edit(record) {\n    form.setFieldsValue(_objectSpread({\n      partner_code: record.product_type,\n      partner_description: record.product_description,\n      transaction_limit: '',\n      daily_limit: ''\n    }, record));\n    setEditingKey(record.key);\n  };\n\n  var cancel = function cancel() {\n    setEditingKey('');\n  };\n\n  var EditableCell = function EditableCell(_ref) {\n    var editing = _ref.editing,\n        dataIndex = _ref.dataIndex,\n        title = _ref.title,\n        inputType = _ref.inputType,\n        record = _ref.record,\n        index = _ref.index,\n        children = _ref.children,\n        restProps = _objectWithoutProperties(_ref, [\"editing\", \"dataIndex\", \"title\", \"inputType\", \"record\", \"index\", \"children\"]);\n\n    var inputNode = inputType === 'number' ? __jsx(InputNumber, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 52\n      }\n    }) : __jsx(Input, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 70\n      }\n    });\n    return __jsx(\"td\", _extends({}, restProps, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }\n    }), editing ? __jsx(Form.Item, {\n      name: dataIndex == 'product_type' ? 'product_code' : dataIndex,\n      style: {\n        margin: 0\n      },\n      rules: [{\n        required: inputType === 'number' ? true : false,\n        message: \"Please Input \".concat(title, \"!\")\n      }],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 15\n      }\n    }, inputNode) : children);\n  };\n\n  var submitChangeProductLimitSelect = function submitChangeProductLimitSelect() {\n    //call api\n    var request = {\n      // partner_code: selectPartnerAndProduct.partner_code,\n      // product_code: businessParametersSetupStore.productLimitDetail.product_code,\n      // transaction_code: '6931',\n      actuin: \"Update\",\n      currentData: businessParametersSetupStore.productLimitDetail,\n      newData: _objectSpread(_objectSpread({}, businessParametersSetupStore.productLimitDetail), {}, {\n        transaction_limit: txnLimit,\n        daily_limit: dailyLimit\n      }) // transaction_limit: txnLimit,\n      // daily_limit: dailyLimit\n\n    };\n    console.log(request);\n    setVisble(false);\n  };\n\n  var prepareAllLimitToSubmitAndUpdate = function prepareAllLimitToSubmitAndUpdate() {\n    setModalString( //waiting for confirm task\n    __jsx(\"div\", {\n      style: {\n        textAlign: \"center\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 11\n      }\n    }, __jsx(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 13\n      }\n    }, \"Confirm to Change Limit Product Code \", businessParametersSetupStore.productLimitDetail.product_type, \"  !!!\")));\n    setVisble(true);\n    setTitleModal('Confirm');\n    setModalType(\"confirm\");\n  };\n\n  var goBackToProductList = function goBackToProductList() {\n    businessParametersSetupStore.goBack = true;\n  };\n\n  var save = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(key) {\n      var row, newData, index, item;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return form.validateFields();\n\n            case 2:\n              row = _context.sent;\n              newData = _toConsumableArray(mockDataPartnerList);\n              index = newData.findIndex(function (item) {\n                return key === item.key;\n              });\n\n              if (index > -1) {\n                item = newData[index];\n                console.log(_objectSpread(_objectSpread({}, item), row));\n                newData.splice(index, 1, _objectSpread(_objectSpread({}, item), row));\n                setMockDataPartnerList(newData);\n                setEditingKey('');\n              } else {\n                newData.push(row);\n                setMockDataPartnerList(newData);\n                setEditingKey('');\n              }\n              /* try {\n                const row = await form.validateFields();\n                const newData = [...mockDataPartnerList];\n                const index = newData.findIndex(item => key === item.key);\n                 if (index > -1) {\n                  const item = newData[index];\n                  newData.splice(index, 1, { ...item, ...row });\n                  setData(newData);\n                  setEditingKey('');\n                } else {\n                  newData.push(row);\n                  setData(newData);\n                  setEditingKey('');\n                }\n              } catch (errInfo) {\n                console.log('Validate Failed:', errInfo);\n              } */\n\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function save(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var deletePartnerSelect = function deletePartnerSelect(record) {\n    console.log(toJS(record)); //waiting call api\n  };\n\n  var setEditEnableLimit = function setEditEnableLimit() {\n    setIsEnableEditButton(false);\n  };\n\n  var cancelEditLimit = function cancelEditLimit() {\n    setIsEnableEditButton(true);\n  };\n\n  var renderAction = function renderAction(record) {\n    /* if (record.status === '1') {\n      return (\n        <div>\n          <TcrbPopconfirm title=\"Sure to Delete?\" onConfirm={(e) => { submitDeleteProduct(record) }} disabled={editingKey !== ''}>\n            <a><DeleteOutlined style={{ fontSize: '18px' }} /></a>\n          </TcrbPopconfirm>\n          <a onClick={() => selectProductToViewDetail(record)}><SettingOutlined style={{ fontSize: '18px', color: '#FBA928' }} /></a>\n          <a onClick={() => selectProductToSpecificLimit(record)}><FormOutlined style={{ fontSize: '18px', color: '#FBA928' }} /></a>\n        </div>)\n    } else if (record.status === '2') {\n      return null\n    } else {\n      return (<div>\n        <TcrbPopconfirm title={\"Confirm to Add !!!\"} onConfirm={() => { submitAddnewProduct(record.key) }} >\n          <a>Confirm</a>\n        </TcrbPopconfirm><br />\n        <TcrbPopconfirm title={\"Confirm to Cancel !!!\"} onConfirm={() => { cancelAddNewProduct(record.key) }} >\n          <a>Cancel</a>\n        </TcrbPopconfirm>\n      </div>)\n    } */\n    var editable = isEditing(record);\n    return editable ? __jsx(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 11\n      }\n    }, __jsx(TcrbPopconfirm, {\n      title: \"Sure to Delete?\",\n      onConfirm: function onConfirm() {\n        return save(record.key);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 13\n      }\n    }, __jsx(\"a\", {\n      style: {\n        marginRight: 8\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 15\n      }\n    }, \"Save\")), __jsx(TcrbPopconfirm, {\n      title: \"Sure to cancel?\",\n      onConfirm: cancel,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 13\n      }\n    }, __jsx(\"a\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 15\n      }\n    }, \"Cancel\"))) : __jsx(\"div\", {\n      style: {\n        textAlign: \"center\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 13\n      }\n    }, __jsx(TcrbPopconfirm, {\n      title: \"Sure to Delete?\",\n      disabled: editingKey !== '',\n      onConfirm: function onConfirm() {\n        return deletePartnerSelect(record);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 15\n      }\n    }, __jsx(\"a\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 17\n      }\n    }, __jsx(DeleteOutlined, {\n      style: {\n        fontSize: '18px'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 20\n      }\n    }))), __jsx(\"a\", {\n      disabled: editingKey !== '',\n      onClick: function onClick() {\n        return edit(record);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 15\n      }\n    }, __jsx(EditOutlined, {\n      style: {\n        fontSize: '18px',\n        color: '#FBA928'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 76\n      }\n    })));\n    {\n      /* <EditOutlined /> */\n    }\n  };\n\n  var columnPartnerList = [{\n    title: 'Partner / Channel',\n    dataIndex: 'partner_code',\n    render: function render(text, record) {\n      return addCommaInData(text);\n    }\n  }, {\n    title: 'Partner Description',\n    dataIndex: 'partner_abbreviation',\n    render: function render(text, record) {\n      return addCommaInData(text);\n    }\n  }, {\n    title: 'Txn Limit',\n    dataIndex: 'transaction_limit',\n    editable: true,\n    render: function render(text, record) {\n      return addCommaInData(text, true);\n    }\n  }, {\n    title: ' Daily Limit',\n    dataIndex: 'daily_limit',\n    editable: true,\n    render: function render(text, record) {\n      return addCommaInData(text, true);\n    }\n  }, {\n    title: 'Action',\n    dataIndex: 'operation',\n    width: '5%',\n    render: function render(text, record, index) {\n      return renderAction(record, index);\n    }\n  }];\n  var mergedColumns = columnPartnerList.map(function (col) {\n    if (!col.editable) {\n      return col;\n    }\n\n    return _objectSpread(_objectSpread({}, col), {}, {\n      onCell: function onCell(record) {\n        return {\n          record: record,\n          inputType: col.dataIndex === 'product_description' ? 'text' : 'number',\n          dataIndex: col.dataIndex,\n          title: col.title,\n          editing: isEditing(record)\n        };\n      }\n    });\n  });\n  return __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 9\n    }\n  }, __jsx(Row, {\n    gutter: [4, 24],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 11\n    }\n  }, __jsx(Col, {\n    span: 2,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 13\n    }\n  }, __jsx(TcrbButton, {\n    className: \"default\",\n    onClick: function onClick() {\n      return goBackToProductList();\n    },\n    shape: \"round\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 15\n    }\n  }, \"Back\"))), __jsx(Row, {\n    gutter: [4, 24],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 11\n    }\n  }, __jsx(Col, {\n    span: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 13\n    }\n  }, \"Product_Code\"), __jsx(Col, {\n    span: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 13\n    }\n  }, businessParametersSetupStore.productLimitDetail.product_type), __jsx(Col, {\n    span: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 13\n    }\n  }, \"Product_Description\"), __jsx(Col, {\n    span: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 13\n    }\n  }, businessParametersSetupStore.productLimitDetail.product_description)), __jsx(Row, {\n    gutter: [4, 24],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 11\n    }\n  }, __jsx(Col, {\n    span: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 13\n    }\n  }, \"All-Channel Txn Limit\"), __jsx(Col, {\n    span: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 13\n    }\n  }, \" \", isEnableEditButton ? businessParametersSetupStore.productLimitDetail.transaction_limit : __jsx(SimpleInput, {\n    defaultValue: businessParametersSetupStore.productLimitDetail.transaction_limit,\n    halfSize: true,\n    onChange: function onChange(e) {\n      return console.log(e);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 15\n    }\n  })), __jsx(Col, {\n    span: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 13\n    }\n  }, \"All-Channel Daily Limit\"), __jsx(Col, {\n    span: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 13\n    }\n  }, \" \", isEnableEditButton ? businessParametersSetupStore.productLimitDetail.daily_limit : __jsx(SimpleInput, {\n    defaultValue: businessParametersSetupStore.productLimitDetail.daily_limit,\n    halfSize: true,\n    onChange: function onChange(e) {\n      return console.log(e);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 15\n    }\n  }))), __jsx(Row, {\n    justify: \"end\",\n    style: {\n      marginTop: 8,\n      textAlign: \"right\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 11\n    }\n  }, __jsx(Col, {\n    span: 4,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 13\n    }\n  }, isEnableEditButton ? __jsx(TcrbButton, {\n    shape: \"round\",\n    className: \"primary\",\n    onClick: function onClick() {\n      setEditEnableLimit();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 17\n    }\n  }, \"Edit\") : __jsx(Space, {\n    size: 8,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 19\n    }\n  }, __jsx(TcrbButton, {\n    shape: \"round\",\n    className: \"default\",\n    onClick: function onClick() {\n      cancelEditLimit();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 21\n    }\n  }, \"Cancel\"), __jsx(TcrbButton, {\n    shape: \"round\",\n    className: \"primary\",\n    onClick: function onClick() {\n      prepareAllLimitToSubmitAndUpdate();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 21\n    }\n  }, \"Submit\")))), __jsx(Divider, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 11\n    }\n  }), __jsx(Form, {\n    form: form,\n    component: false,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 11\n    }\n  }, __jsx(Table, {\n    components: {\n      body: {\n        cell: EditableCell\n      }\n    },\n    bordered: true,\n    dataSource: mockDataPartnerList,\n    columns: mergedColumns,\n    size: \"small\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 13\n    }\n  })), __jsx(SimpleModal, {\n    title: titleModal,\n    type: modalType,\n    onOk: function onOk() {\n      submitChangeProductLimitSelect();\n    },\n    onCancel: function onCancel() {\n      return setVisble(false);\n    },\n    textOk: t(\"confirm\"),\n    textCancel: t(\"cancel\"),\n    modalString: modalString,\n    visible: visible,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 11\n    }\n  }));\n}, \"m4GQQfpMzjy4Pmp28YAS6JJhj+I=\", false, function () {\n  return [Form.useForm];\n})));\nexport default withTranslation('common')(managePartner);","map":{"version":3,"sources":["/Users/admin/Desktop/tcrb-ob-project/tcrb-ob-backoffice-frontend/components/business-parameters-setup/product-limit-setup/manage-partner.js"],"names":["React","useState","useEffect","inject","observer","withTranslation","Table","Row","Col","Menu","Card","Input","Select","Form","InputNumber","Divider","Popconfirm","Space","DeleteOutlined","EditOutlined","FormOutlined","TcrbButton","TcrbPopconfirm","addKeyToDataSource","addCommaInData","SimpleInput","SimpleModal","toJS","managePartner","props","businessParametersSetupStore","t","useForm","form","editingKey","setEditingKey","isEditing","record","key","mockDataPartnerList","setMockDataPartnerList","isEnableEditButton","setIsEnableEditButton","visible","setVisble","modalString","setModalString","titleModal","setTitleModal","modalType","setModalType","channelPartnerList","then","result","edit","setFieldsValue","partner_code","product_type","partner_description","product_description","transaction_limit","daily_limit","cancel","EditableCell","editing","dataIndex","title","inputType","index","children","restProps","inputNode","margin","required","message","submitChangeProductLimitSelect","request","actuin","currentData","productLimitDetail","newData","txnLimit","dailyLimit","console","log","prepareAllLimitToSubmitAndUpdate","textAlign","goBackToProductList","goBack","save","validateFields","row","findIndex","item","splice","push","deletePartnerSelect","setEditEnableLimit","cancelEditLimit","renderAction","editable","marginRight","fontSize","color","columnPartnerList","render","text","width","mergedColumns","map","col","onCell","e","marginTop","body","cell"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { inject, observer } from 'mobx-react'\nimport { withTranslation } from '../../../i18n'\nimport { Table, Row, Col, Menu, Card, Input, Select, Form, InputNumber, Divider, Popconfirm, Space } from 'antd'\nimport { DeleteOutlined, EditOutlined, FormOutlined } from '@ant-design/icons';\n\nimport { TcrbButton, TcrbPopconfirm } from '../../antd-styles/styles'\nimport { addKeyToDataSource, addCommaInData } from '../../data-utility'\nimport SimpleInput from '../../simple-input'\nimport SimpleModal from '../../simple-modal'\nimport { toJS } from 'mobx';\n\nconst managePartner =\n  inject('businessParametersSetupStore')\n    (observer((props) => {\n      const { businessParametersSetupStore, t } = props\n      const [form] = Form.useForm();\n      const [editingKey, setEditingKey] = useState('')\n      const isEditing = record => record.key === editingKey;\n      const [mockDataPartnerList, setMockDataPartnerList] = useState([])\n      const [isEnableEditButton, setIsEnableEditButton] = useState(true)\n      const [visible, setVisble] = useState(false)\n      const [modalString, setModalString] = useState('')\n      const [titleModal, setTitleModal] = useState('')\n      const [modalType, setModalType] = useState('')\n\n      // var mockDataPartnerList = []\n      useEffect(() => {\n        addKeyToDataSource(businessParametersSetupStore.channelPartnerList).then((result) => {\n          // mockDataPartnerList = result\n          setMockDataPartnerList(result)\n        })\n      }, [])\n\n      const edit = record => {\n        form.setFieldsValue({\n          partner_code: record.product_type,\n          partner_description: record.product_description,\n          transaction_limit: '',\n          daily_limit: '',\n          ...record,\n        });\n        setEditingKey(record.key);\n      };\n\n      const cancel = () => {\n        setEditingKey('');\n      };\n\n      const EditableCell = ({\n        editing,\n        dataIndex,\n        title,\n        inputType,\n        record,\n        index,\n        children,\n        ...restProps\n      }) => {\n        const inputNode = inputType === 'number' ? <InputNumber /> : <Input />;\n        return (\n          <td {...restProps}>\n            {editing ? (\n\n              <Form.Item\n                name={dataIndex == 'product_type' ? 'product_code' : dataIndex}\n                style={{\n                  margin: 0,\n                }}\n                rules={[\n                  {\n                    required: (inputType === 'number') ? true : false,\n                    message: `Please Input ${title}!`,\n                  },\n                ]}\n              >\n                {inputNode}\n              </Form.Item>\n            ) : (\n                children\n              )\n            }\n          </td>\n        );\n      };\n      const submitChangeProductLimitSelect = () => {\n        //call api\n        let request = {\n          // partner_code: selectPartnerAndProduct.partner_code,\n          // product_code: businessParametersSetupStore.productLimitDetail.product_code,\n          // transaction_code: '6931',\n          actuin: \"Update\",\n          currentData: businessParametersSetupStore.productLimitDetail,\n          newData: { ...businessParametersSetupStore.productLimitDetail, transaction_limit: txnLimit, daily_limit: dailyLimit },\n          // transaction_limit: txnLimit,\n          // daily_limit: dailyLimit\n        }\n        console.log(request)\n        setVisble(false)\n      }\n\n      const prepareAllLimitToSubmitAndUpdate = () => {\n        setModalString(\n          //waiting for confirm task\n          <div style={{ textAlign: \"center\" }}>\n            <p>Confirm to Change Limit Product Code {businessParametersSetupStore.productLimitDetail.product_type}  !!!</p>\n            {/* <p>for {selectPartnerAndProduct.partner_code}/{selectPartnerAndProduct.partner_abbreviation} Channel/Partner !!!</p> */}\n          </div>\n        )\n        setVisble(true)\n        setTitleModal('Confirm')\n        setModalType(\"confirm\")\n      }\n      const goBackToProductList = () => {\n        businessParametersSetupStore.goBack = true\n      }\n\n      const save = async key => {\n        const row = await form.validateFields();\n        const newData = [...mockDataPartnerList];\n        const index = newData.findIndex(item => key === item.key);\n\n        if (index > -1) {\n          const item = newData[index];\n          console.log({ ...item, ...row })\n          newData.splice(index, 1, { ...item, ...row });\n          setMockDataPartnerList(newData);\n          setEditingKey('');\n        } else {\n          newData.push(row);\n          setMockDataPartnerList(newData);\n          setEditingKey('');\n        }\n        /* try {\n          const row = await form.validateFields();\n          const newData = [...mockDataPartnerList];\n          const index = newData.findIndex(item => key === item.key);\n\n          if (index > -1) {\n            const item = newData[index];\n            newData.splice(index, 1, { ...item, ...row });\n            setData(newData);\n            setEditingKey('');\n          } else {\n            newData.push(row);\n            setData(newData);\n            setEditingKey('');\n          }\n        } catch (errInfo) {\n          console.log('Validate Failed:', errInfo);\n        } */\n      };\n\n      const deletePartnerSelect = (record) => {\n        console.log(toJS(record))\n        //waiting call api\n      }\n\n      const setEditEnableLimit = () => {\n        setIsEnableEditButton(false)\n      }\n\n      const cancelEditLimit = () => {\n        setIsEnableEditButton(true)\n      }\n\n      const renderAction = (record) => {\n        /* if (record.status === '1') {\n          return (\n            <div>\n              <TcrbPopconfirm title=\"Sure to Delete?\" onConfirm={(e) => { submitDeleteProduct(record) }} disabled={editingKey !== ''}>\n                <a><DeleteOutlined style={{ fontSize: '18px' }} /></a>\n              </TcrbPopconfirm>\n              <a onClick={() => selectProductToViewDetail(record)}><SettingOutlined style={{ fontSize: '18px', color: '#FBA928' }} /></a>\n              <a onClick={() => selectProductToSpecificLimit(record)}><FormOutlined style={{ fontSize: '18px', color: '#FBA928' }} /></a>\n            </div>)\n        } else if (record.status === '2') {\n          return null\n        } else {\n          return (<div>\n            <TcrbPopconfirm title={\"Confirm to Add !!!\"} onConfirm={() => { submitAddnewProduct(record.key) }} >\n              <a>Confirm</a>\n            </TcrbPopconfirm><br />\n            <TcrbPopconfirm title={\"Confirm to Cancel !!!\"} onConfirm={() => { cancelAddNewProduct(record.key) }} >\n              <a>Cancel</a>\n            </TcrbPopconfirm>\n          </div>)\n        } */\n        const editable = isEditing(record);\n        return editable ? (\n          <span>\n            <TcrbPopconfirm title=\"Sure to Delete?\" onConfirm={() => save(record.key)}>\n              <a\n                style={{\n                  marginRight: 8,\n                }}\n              >\n                Save\n            </a>\n            </TcrbPopconfirm>\n            <TcrbPopconfirm title=\"Sure to cancel?\" onConfirm={cancel}>\n              <a>Cancel</a>\n            </TcrbPopconfirm>\n          </span>\n        ) : (\n            <div style={{ textAlign: \"center\" }}>\n              <TcrbPopconfirm title=\"Sure to Delete?\" disabled={editingKey !== ''} onConfirm={() => deletePartnerSelect(record)}>\n                <a><DeleteOutlined style={{ fontSize: '18px' }} /></a>\n              </TcrbPopconfirm>\n              <a disabled={editingKey !== ''} onClick={() => edit(record)}><EditOutlined style={{ fontSize: '18px', color: '#FBA928' }} /></a>\n            </div>\n          );\n        {/* <EditOutlined /> */ }\n      }\n      const columnPartnerList = [\n        {\n          title: 'Partner / Channel',\n          dataIndex: 'partner_code',\n          render: (text, record) => addCommaInData(text)\n        },\n        {\n          title: 'Partner Description',\n          dataIndex: 'partner_abbreviation',\n          render: (text, record) => addCommaInData(text)\n        },\n        {\n          title: 'Txn Limit',\n          dataIndex: 'transaction_limit',\n          editable: true,\n          render: (text, record) => addCommaInData(text, true)\n        },\n        {\n          title: ' Daily Limit',\n          dataIndex: 'daily_limit',\n          editable: true,\n          render: (text, record) => addCommaInData(text, true)\n        },\n        {\n          title: 'Action',\n          dataIndex: 'operation',\n          width: '5%',\n          render: (text, record, index) =>\n            renderAction(record, index)\n        },\n      ]\n      const mergedColumns = columnPartnerList.map(col => {\n        if (!col.editable) {\n          return col;\n        }\n\n        return {\n          ...col,\n          onCell: record => ({\n            record,\n            inputType: col.dataIndex === 'product_description' ? 'text' : 'number',\n            dataIndex: col.dataIndex,\n            title: col.title,\n            editing: isEditing(record),\n          }),\n        };\n      });\n\n      return (\n        <div>\n          <Row gutter={[4, 24]}>\n            <Col span={2}>\n              <TcrbButton className=\"default\" onClick={() => goBackToProductList()} shape=\"round\">Back</TcrbButton>\n            </Col>\n          </Row>\n          <Row gutter={[4, 24]}>\n            <Col span={6}>Product_Code</Col>\n            <Col span={6}>{businessParametersSetupStore.productLimitDetail.product_type}</Col>\n            <Col span={6}>Product_Description</Col>\n            <Col span={6}>{businessParametersSetupStore.productLimitDetail.product_description}</Col>\n\n          </Row>\n          <Row gutter={[4, 24]}>\n            <Col span={6}>All-Channel Txn Limit</Col>\n            {/* <Col span={6}>{businessParametersSetupStore.productLimitDetail.transaction_limit}</Col> */}\n            <Col span={6}> {isEnableEditButton ?\n              businessParametersSetupStore.productLimitDetail.transaction_limit :\n              <SimpleInput defaultValue={businessParametersSetupStore.productLimitDetail.transaction_limit} halfSize={true} onChange={(e) => console.log(e)} />}\n            </Col>\n\n            <Col span={6}>All-Channel Daily Limit</Col>\n            {/* <Col span={6}>{businessParametersSetupStore.productLimitDetail.daily_limit}</Col> */}\n            <Col span={6}> {isEnableEditButton ?\n              businessParametersSetupStore.productLimitDetail.daily_limit :\n              <SimpleInput defaultValue={businessParametersSetupStore.productLimitDetail.daily_limit} halfSize={true} onChange={(e) => console.log(e)} />}\n            </Col>\n          </Row>\n          <Row justify=\"end\" style={{ marginTop: 8, textAlign: \"right\" }}>\n            {/* <Col span={2}>\n              <TcrbButton className=\"default\" onClick={() => goBackToProductList()} shape=\"round\">Back</TcrbButton>\n            </Col> */}\n            <Col span={4}>\n              {isEnableEditButton ? (\n                <TcrbButton shape=\"round\" className=\"primary\" onClick={() => { setEditEnableLimit() }}>Edit</TcrbButton>\n              ) : (\n                  <Space size={8}>\n                    <TcrbButton shape=\"round\" className=\"default\" onClick={() => { cancelEditLimit() }}>Cancel</TcrbButton>\n                    <TcrbButton shape=\"round\" className=\"primary\" onClick={() => { prepareAllLimitToSubmitAndUpdate() }}>Submit</TcrbButton>\n                  </Space>\n                )}\n            </Col>\n          </Row>\n          <Divider />\n          <Form form={form} component={false}>\n            <Table\n              components={{\n                body: {\n                  cell: EditableCell,\n                },\n              }}\n              bordered\n              dataSource={mockDataPartnerList}\n              columns={mergedColumns}\n              size=\"small\"\n            />\n          </Form>\n          <SimpleModal\n            title={titleModal}\n            type={modalType}\n            onOk={() => { submitChangeProductLimitSelect() }}\n            onCancel={() => setVisble(false)}\n            textOk={t(\"confirm\")}\n            textCancel={t(\"cancel\")}\n            modalString={modalString}\n            visible={visible}\n          />\n        </div>\n      )\n    }))\nexport default withTranslation('common')(managePartner)\n"]},"metadata":{},"sourceType":"module"}