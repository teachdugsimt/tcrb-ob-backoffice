{"ast":null,"code":"var _jsxFileName = \"/Users/admin/Desktop/tcrb-ob-project/tcrb-ob-backoffice-frontend/components/customer-services-menu/account-unbinding.js\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport SimpleSearch from '../simple-search';\nimport SimpleSwitch from '../simple-switch';\nimport styled from 'styled-components';\nimport { Row, Switch, Col, Button, Input } from 'antd';\nimport SimpleModal from '../simple-modal';\nimport { inject, observer } from 'mobx-react';\nimport { toJS } from 'mobx';\nimport { withTranslation } from '../../i18n';\nconst StyledA = styled.a.withConfig({\n  displayName: \"account-unbinding__StyledA\",\n  componentId: \"sc-1wve73-0\"\n})([\"display:initial;padding-right:\", \"px !important;color:#F88008 !important;text-decoration-color:#F88008;text-decoration-line:underline;\"], ({\n  theme\n}) => theme.spacing.medium);\nconst StyledP = styled.p.withConfig({\n  displayName: \"account-unbinding__StyledP\",\n  componentId: \"sc-1wve73-1\"\n})([\"display:initial;padding-left:\", \"px !important;\"], ({\n  theme\n}) => theme.spacing.medium);\nconst StyledSpan = styled.span.withConfig({\n  displayName: \"account-unbinding__StyledSpan\",\n  componentId: \"sc-1wve73-2\"\n})([\"display:initial;padding-left:\", \"px !important;\"], ({\n  theme\n}) => theme.spacing.medium);\nconst StyledInput = styled(Input).withConfig({\n  displayName: \"account-unbinding__StyledInput\",\n  componentId: \"sc-1wve73-3\"\n})([\"\", \"\"], ({\n  readOnly\n}) => readOnly && `\n          border-style: solid !important;\n          border-width: 0px 0px 1px 0px !important;\n          border-color: black !important;\n          box-shadow: none !important;\n          border-right-style: unset !important;\n          border-right-width: 0px !important\n      `);\nconst AccountUnbinding = inject('customerServicesMenuStore')(observer(props => {\n  const {\n    0: isSearch,\n    1: setIsSearch\n  } = useState(false);\n  const {\n    0: viewDetail,\n    1: setViewDetail\n  } = useState(false);\n  const {\n    0: visible,\n    1: setVisble\n  } = useState(false);\n  const {\n    0: modalString,\n    1: setModalString\n  } = useState('');\n  const {\n    0: accountId,\n    1: setAccountId\n  } = useState(''); // const stringSwitch = [{ accountName: i18n.t(\"bindingTCRBMobilBanking\"), accountBindingStatus: true, accountType: '1' }, { accountName: i18n.t(\"bindingMicroPay\"), accountBindingStatus: true, accountType: '2' }, { accountName: i18n.t(\"bindingTrueMoneyWallet\"), accountBindingStatus: true, accountType: '3' }]\n  // const stringAccount = [{ accountNumber: '2233344514', accountName: i18n.t(\"normalSaving\"), accountType: '1' }, { accountNumber: '123456789032', accountName: i18n.t(\"revolvingLoanNonTCG\"), accountType: '2' }]\n\n  const mockData = [{\n    accountName: 'Binding to TCRB Mobile Banking',\n    accountBindingStatus: true,\n    accountType: '1'\n  }, {\n    accountName: 'Binding to Micro Pay',\n    accountBindingStatus: true,\n    accountType: '2'\n  }, {\n    accountName: 'Binding to True Money Wallet',\n    accountBindingStatus: true,\n    accountType: '3'\n  }];\n  const {\n    0: stringAccount,\n    1: setStringAccount\n  } = useState([]);\n  const {\n    0: stringSwitch,\n    1: setStringSwitch\n  } = useState([]);\n  const {\n    customerServicesMenuStore,\n    t\n  } = props;\n  useEffect(() => {\n    if (isSearch) {\n      setStringAccount(customerServicesMenuStore.accountInfo);\n    }\n  }, [customerServicesMenuStore.accountInfo]);\n  useEffect(() => {\n    if (isSearch) {\n      if (customerServicesMenuStore.unbindAccountInfo.ok) {\n        convertArrayObjectToArray(mockData).then(result => {\n          customerServicesMenuStore.arrayUnbindAccountInfo = result; // setStringSwitch(result)\n\n          setStringSwitch(result);\n        });\n      }\n    }\n  }, [customerServicesMenuStore.unbindAccountInfo]);\n\n  const searchIdCardNumber = async value => {\n    // console.log('eiei search:' + value)\n    // setIdCard(value)\n    setIsSearch(true); // customerServicesMenuStore.setCitizenId(value)\n\n    await customerServicesMenuStore.getDataAccountUnbind(value);\n  };\n\n  const convertArrayObjectToArray = arrayObject => {\n    return new Promise((resolve, reject) => {\n      let result = arrayObject.map(accountDetail => [accountDetail.accountBindingStatus, accountDetail.main_account_no, accountDetail.product_name_english]);\n      resolve(result);\n    });\n  };\n\n  const selectAccount = async selectedAccount => {\n    console.log(toJS(selectedAccount)); // customerServicesMenuStore.setAccountId(selectedAccount.main_account_no)\n\n    await customerServicesMenuStore.getDataAccountProduct();\n    setViewDetail(true);\n  };\n\n  const onChange = (switchSelected, index) => {\n    // console.log(\"change:\" + value + \",indexOf :\" + index)\n    if (switchSelected.accountBindingStatus === true) {// setVisble(true)\n      // switch (switchSelected.accountType) {\n      //   case '1':\n      //     setModalString(\n      //       <div style={{ textAlign: \"center\" }}>\n      //         <p>{t(\"unbinding\")}</p>\n      //         <p> {t(\"account\") + \" \" + customerServicesMenuStore.accountId} from Mobile Banking</p>\n      //       </div>\n      //     )\n      //     break;\n      //   case '2':\n      //     setModalString(\n      //       <div style={{ textAlign: \"center\" }}>\n      //         <p>{t(\"unbinding\")}</p>\n      //         <p> {t(\"account\") + \" \" + customerServicesMenuStore.accountId} from Micro Pay</p>\n      //       </div>\n      //     )\n      //     break;\n      //   case '3':\n      //     setModalString(\n      //       <div style={{ textAlign: \"center\" }}>\n      //         <p>{t(\"unbinding\")}</p>\n      //         <p> {t(\"account\") + \" \" + customerServicesMenuStore.accountId} from True Money Wallet</p>\n      //       </div>\n      //     )\n      //     break;\n      //   default:\n      //     break;\n      // }\n    } else {// setIsChecked(false)\n      }\n  };\n\n  const unBindingAccount = async () => {\n    setVisble(false); // call api\n\n    await customerServicesMenuStore.submitAccountUnbiding();\n  };\n\n  const AccountList = () => {\n    const listItems = stringAccount.map((string, index) => __jsx(Row, {\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 11\n      }\n    }, __jsx(Col, {\n      span: 24,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 13\n      }\n    }, __jsx(StyledA, {\n      onClick: () => {\n        selectAccount(string);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 15\n      }\n    }, string.main_account_no), __jsx(StyledSpan, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 100\n      }\n    }, \" \", string.product_name_english))));\n    return __jsx(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 11\n      }\n    }, listItems);\n  };\n\n  const newSearch = __jsx(\"div\", {\n    style: {\n      marginTop: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 9\n    }\n  }, __jsx(Row, {\n    gutter: [4, 24],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 11\n    }\n  }, __jsx(SimpleSearch, {\n    search: searchIdCardNumber,\n    prefixWording: t(\"idCard\"),\n    loading: customerServicesMenuStore.apiFetching,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 13\n    }\n  })), isSearch ? __jsx(AccountList, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 13\n    }\n  }) : '');\n\n  const accountDetail = __jsx(\"div\", {\n    style: {\n      margin: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 9\n    }\n  }, __jsx(Row, {\n    gutter: [4, 24],\n    align: \"top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 11\n    }\n  }, __jsx(Col, {\n    span: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 13\n    }\n  }, __jsx(StyledInput, {\n    readOnly: true,\n    prefix: t('accountNumber'),\n    defaultValue: customerServicesMenuStore.accountId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 15\n    }\n  }))), __jsx(Row, {\n    gutter: [4, 24],\n    align: \"middle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 11\n    }\n  }, __jsx(SimpleSwitch, {\n    data: stringSwitch,\n    onChange: (switchSelected, index) => onChange(switchSelected, index),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 13\n    }\n  }), __jsx(SimpleModal, {\n    onOk: () => unBindingAccount(),\n    onCancel: () => setVisble(false),\n    okText: \"Confirm\",\n    cancelText: \"Cancel\",\n    modalString: modalString,\n    visible: visible,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 13\n    }\n  })), __jsx(Row, {\n    gutter: [4, 24],\n    align: \"bottom\",\n    justify: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 11\n    }\n  }, __jsx(Col, {\n    span: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 13\n    }\n  }, __jsx(Button, {\n    shape: \"round\",\n    onClick: () => setViewDetail(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 15\n    }\n  }, \"Back\"))));\n\n  return viewDetail ? accountDetail : newSearch;\n}));\nexport default withTranslation('common')(AccountUnbinding);","map":{"version":3,"sources":["/Users/admin/Desktop/tcrb-ob-project/tcrb-ob-backoffice-frontend/components/customer-services-menu/account-unbinding.js"],"names":["React","useState","useEffect","SimpleSearch","SimpleSwitch","styled","Row","Switch","Col","Button","Input","SimpleModal","inject","observer","toJS","withTranslation","StyledA","a","theme","spacing","medium","StyledP","p","StyledSpan","span","StyledInput","readOnly","AccountUnbinding","props","isSearch","setIsSearch","viewDetail","setViewDetail","visible","setVisble","modalString","setModalString","accountId","setAccountId","mockData","accountName","accountBindingStatus","accountType","stringAccount","setStringAccount","stringSwitch","setStringSwitch","customerServicesMenuStore","t","accountInfo","unbindAccountInfo","ok","convertArrayObjectToArray","then","result","arrayUnbindAccountInfo","searchIdCardNumber","value","getDataAccountUnbind","arrayObject","Promise","resolve","reject","map","accountDetail","main_account_no","product_name_english","selectAccount","selectedAccount","console","log","getDataAccountProduct","onChange","switchSelected","index","unBindingAccount","submitAccountUnbiding","AccountList","listItems","string","newSearch","marginTop","apiFetching","margin"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,YAAP,MAAyB,kBAAzB;AACA,OAAOC,YAAP,MAAyB,kBAAzB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAASC,GAAT,EAAcC,MAAd,EAAsBC,GAAtB,EAA2BC,MAA3B,EAAmCC,KAAnC,QAAgD,MAAhD;AACA,OAAOC,WAAP,MAAwB,iBAAxB;AACA,SAASC,MAAT,EAAiBC,QAAjB,QAAiC,YAAjC;AACA,SAASC,IAAT,QAAqB,MAArB;AACA,SAASC,eAAT,QAAgC,YAAhC;AAEA,MAAMC,OAAO,GAAGX,MAAM,CAACY,CAAV;AAAA;AAAA;AAAA,+IAEM,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAeA,KAAK,CAACC,OAAN,CAAcC,MAFnC,CAAb;AAOA,MAAMC,OAAO,GAAGhB,MAAM,CAACiB,CAAV;AAAA;AAAA;AAAA,wDAEK,CAAC;AAAEJ,EAAAA;AAAF,CAAD,KAAeA,KAAK,CAACC,OAAN,CAAcC,MAFlC,CAAb;AAIA,MAAMG,UAAU,GAAGlB,MAAM,CAACmB,IAAV;AAAA;AAAA;AAAA,wDAGE,CAAC;AAAEN,EAAAA;AAAF,CAAD,KAAeA,KAAK,CAACC,OAAN,CAAcC,MAH/B,CAAhB;AAKA,MAAMK,WAAW,GAAGpB,MAAM,CAACK,KAAD,CAAT;AAAA;AAAA;AAAA,aACT,CAAC;AAAEgB,EAAAA;AAAF,CAAD,KAAkBA,QAAQ,IAAK;;;;;;;OADtB,CAAjB;AAUA,MAAMC,gBAAgB,GACpBf,MAAM,CAAC,2BAAD,CAAN,CACGC,QAAQ,CAAEe,KAAD,IAAW;AACnB,QAAM;AAAA,OAACC,QAAD;AAAA,OAAWC;AAAX,MAA0B7B,QAAQ,CAAC,KAAD,CAAxC;AACA,QAAM;AAAA,OAAC8B,UAAD;AAAA,OAAaC;AAAb,MAA8B/B,QAAQ,CAAC,KAAD,CAA5C;AACA,QAAM;AAAA,OAACgC,OAAD;AAAA,OAAUC;AAAV,MAAuBjC,QAAQ,CAAC,KAAD,CAArC;AACA,QAAM;AAAA,OAACkC,WAAD;AAAA,OAAcC;AAAd,MAAgCnC,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM;AAAA,OAACoC,SAAD;AAAA,OAAYC;AAAZ,MAA4BrC,QAAQ,CAAC,EAAD,CAA1C,CALmB,CAMnB;AACA;;AACA,QAAMsC,QAAQ,GAAG,CAAC;AAAEC,IAAAA,WAAW,EAAE,gCAAf;AAAiDC,IAAAA,oBAAoB,EAAE,IAAvE;AAA6EC,IAAAA,WAAW,EAAE;AAA1F,GAAD,EAAkG;AAAEF,IAAAA,WAAW,EAAE,sBAAf;AAAuCC,IAAAA,oBAAoB,EAAE,IAA7D;AAAmEC,IAAAA,WAAW,EAAE;AAAhF,GAAlG,EAAyL;AAAEF,IAAAA,WAAW,EAAE,8BAAf;AAA+CC,IAAAA,oBAAoB,EAAE,IAArE;AAA2EC,IAAAA,WAAW,EAAE;AAAxF,GAAzL,CAAjB;AACA,QAAM;AAAA,OAACC,aAAD;AAAA,OAAgBC;AAAhB,MAAoC3C,QAAQ,CAAC,EAAD,CAAlD;AACA,QAAM;AAAA,OAAC4C,YAAD;AAAA,OAAeC;AAAf,MAAkC7C,QAAQ,CAAC,EAAD,CAAhD;AACA,QAAM;AAAE8C,IAAAA,yBAAF;AAA6BC,IAAAA;AAA7B,MAAmCpB,KAAzC;AAEA1B,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI2B,QAAJ,EAAc;AACZe,MAAAA,gBAAgB,CAACG,yBAAyB,CAACE,WAA3B,CAAhB;AACD;AACF,GAJQ,EAIN,CAACF,yBAAyB,CAACE,WAA3B,CAJM,CAAT;AAMA/C,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI2B,QAAJ,EAAc;AACZ,UAAIkB,yBAAyB,CAACG,iBAA1B,CAA4CC,EAAhD,EAAoD;AAClDC,QAAAA,yBAAyB,CAACb,QAAD,CAAzB,CAAoCc,IAApC,CAAyCC,MAAM,IAAI;AACjDP,UAAAA,yBAAyB,CAACQ,sBAA1B,GAAmDD,MAAnD,CADiD,CAEjD;;AACAR,UAAAA,eAAe,CAACQ,MAAD,CAAf;AACD,SAJD;AAKD;AACF;AACF,GAVQ,EAUN,CAACP,yBAAyB,CAACG,iBAA3B,CAVM,CAAT;;AAYA,QAAMM,kBAAkB,GAAG,MAAOC,KAAP,IAAiB;AAC1C;AACA;AACA3B,IAAAA,WAAW,CAAC,IAAD,CAAX,CAH0C,CAI1C;;AACA,UAAMiB,yBAAyB,CAACW,oBAA1B,CAA+CD,KAA/C,CAAN;AAED,GAPD;;AASA,QAAML,yBAAyB,GAAIO,WAAD,IAAiB;AACjD,WAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtC,UAAIR,MAAM,GAAGK,WAAW,CAACI,GAAZ,CAAgBC,aAAa,IAAI,CAACA,aAAa,CAACvB,oBAAf,EAAqCuB,aAAa,CAACC,eAAnD,EAAoED,aAAa,CAACE,oBAAlF,CAAjC,CAAb;AACAL,MAAAA,OAAO,CAACP,MAAD,CAAP;AACD,KAHM,CAAP;AAID,GALD;;AAOA,QAAMa,aAAa,GAAG,MAAOC,eAAP,IAA2B;AAC/CC,IAAAA,OAAO,CAACC,GAAR,CAAYxD,IAAI,CAACsD,eAAD,CAAhB,EAD+C,CAE/C;;AACA,UAAMrB,yBAAyB,CAACwB,qBAA1B,EAAN;AACAvC,IAAAA,aAAa,CAAC,IAAD,CAAb;AAED,GAND;;AAOA,QAAMwC,QAAQ,GAAG,CAACC,cAAD,EAAiBC,KAAjB,KAA2B;AAC1C;AAEA,QAAID,cAAc,CAAChC,oBAAf,KAAwC,IAA5C,EAAkD,CAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD,KA9BD,MA8BO,CACL;AACD;AACF,GApCD;;AAsCA,QAAMkC,gBAAgB,GAAG,YAAY;AACnCzC,IAAAA,SAAS,CAAC,KAAD,CAAT,CADmC,CAEnC;;AACA,UAAMa,yBAAyB,CAAC6B,qBAA1B,EAAN;AACD,GAJD;;AAMA,QAAMC,WAAW,GAAG,MAAM;AACxB,UAAMC,SAAS,GAAGnC,aAAa,CAACoB,GAAd,CAAkB,CAACgB,MAAD,EAASL,KAAT,KAClC,MAAC,GAAD;AAAK,MAAA,GAAG,EAAEA,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,MAAC,GAAD;AAAK,MAAA,IAAI,EAAE,EAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,MAAC,OAAD;AAAS,MAAA,OAAO,EAAE,MAAM;AAAEP,QAAAA,aAAa,CAACY,MAAD,CAAb;AAAuB,OAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAoDA,MAAM,CAACd,eAA3D,CADF,EACuF,MAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAcc,MAAM,CAACb,oBAArB,CADvF,CADF,CADgB,CAAlB;AAQA,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKY,SAAL,CADF;AAGD,GAZD;;AAaA,QAAME,SAAS,GACb;AAAK,IAAA,KAAK,EAAE;AAAEC,MAAAA,SAAS,EAAE;AAAb,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,GAAD;AAAK,IAAA,MAAM,EAAE,CAAC,CAAD,EAAI,EAAJ,CAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,YAAD;AAAc,IAAA,MAAM,EAAEzB,kBAAtB;AAA0C,IAAA,aAAa,EAAER,CAAC,CAAC,QAAD,CAA1D;AAAsE,IAAA,OAAO,EAAED,yBAAyB,CAACmC,WAAzG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,EAIIrD,QAAD,GACC,MAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,GAEI,EANP,CADF;;AAUA,QAAMmC,aAAa,GACjB;AAAK,IAAA,KAAK,EAAE;AAAEmB,MAAAA,MAAM,EAAE;AAAV,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAIE,MAAC,GAAD;AAAK,IAAA,MAAM,EAAE,CAAC,CAAD,EAAI,EAAJ,CAAb;AAAsB,IAAA,KAAK,EAAC,KAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,GAAD;AAAK,IAAA,IAAI,EAAE,CAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,WAAD;AAAa,IAAA,QAAQ,EAAE,IAAvB;AAA6B,IAAA,MAAM,EAAEnC,CAAC,CAAC,eAAD,CAAtC;AAAyD,IAAA,YAAY,EAAED,yBAAyB,CAACV,SAAjG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,CAJF,EAUE,MAAC,GAAD;AAAK,IAAA,MAAM,EAAE,CAAC,CAAD,EAAI,EAAJ,CAAb;AAAsB,IAAA,KAAK,EAAC,QAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEE,MAAC,YAAD;AACE,IAAA,IAAI,EAAEQ,YADR;AAEE,IAAA,QAAQ,EAAE,CAAC4B,cAAD,EAAiBC,KAAjB,KAA2BF,QAAQ,CAACC,cAAD,EAAiBC,KAAjB,CAF/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,EAME,MAAC,WAAD;AACE,IAAA,IAAI,EAAE,MAAMC,gBAAgB,EAD9B;AAEE,IAAA,QAAQ,EAAE,MAAMzC,SAAS,CAAC,KAAD,CAF3B;AAGE,IAAA,MAAM,EAAC,SAHT;AAIE,IAAA,UAAU,EAAC,QAJb;AAKE,IAAA,WAAW,EAAEC,WALf;AAME,IAAA,OAAO,EAAEF,OANX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANF,CAVF,EA0BE,MAAC,GAAD;AAAK,IAAA,MAAM,EAAE,CAAC,CAAD,EAAI,EAAJ,CAAb;AAAsB,IAAA,KAAK,EAAC,QAA5B;AAAqC,IAAA,OAAO,EAAC,QAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,GAAD;AAAK,IAAA,IAAI,EAAE,CAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AAAQ,IAAA,KAAK,EAAC,OAAd;AAAsB,IAAA,OAAO,EAAE,MAAMD,aAAa,CAAC,KAAD,CAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,CADF,CA1BF,CADF;;AAmCA,SAAQD,UAAD,GAAeiC,aAAf,GAA+BgB,SAAtC;AACD,CA7JQ,CADX,CADF;AAgKA,eAAejE,eAAe,CAAC,QAAD,CAAf,CAA0BY,gBAA1B,CAAf","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport SimpleSearch from '../simple-search'\nimport SimpleSwitch from '../simple-switch'\nimport styled from 'styled-components'\nimport { Row, Switch, Col, Button, Input } from 'antd';\nimport SimpleModal from '../simple-modal'\nimport { inject, observer } from 'mobx-react'\nimport { toJS } from 'mobx';\nimport { withTranslation } from '../../i18n'\n\nconst StyledA = styled.a`\n  display: initial;\n  padding-right: ${({ theme }) => theme.spacing.medium}px !important;\n  color: #F88008 !important;\n  text-decoration-color: #F88008;\n  text-decoration-line: underline;\n`\nconst StyledP = styled.p`\n  display: initial;\n  padding-left: ${({ theme }) => theme.spacing.medium}px !important;\n`\nconst StyledSpan = styled.span`\n\n  display: initial;\n  padding-left: ${({ theme }) => theme.spacing.medium}px !important;\n`\nconst StyledInput = styled(Input)`\n      ${({ readOnly }) => readOnly && `\n          border-style: solid !important;\n          border-width: 0px 0px 1px 0px !important;\n          border-color: black !important;\n          box-shadow: none !important;\n          border-right-style: unset !important;\n          border-right-width: 0px !important\n      `}\n`\nconst AccountUnbinding =\n  inject('customerServicesMenuStore')\n    (observer((props) => {\n      const [isSearch, setIsSearch] = useState(false);\n      const [viewDetail, setViewDetail] = useState(false);\n      const [visible, setVisble] = useState(false)\n      const [modalString, setModalString] = useState('')\n      const [accountId, setAccountId] = useState('')\n      // const stringSwitch = [{ accountName: i18n.t(\"bindingTCRBMobilBanking\"), accountBindingStatus: true, accountType: '1' }, { accountName: i18n.t(\"bindingMicroPay\"), accountBindingStatus: true, accountType: '2' }, { accountName: i18n.t(\"bindingTrueMoneyWallet\"), accountBindingStatus: true, accountType: '3' }]\n      // const stringAccount = [{ accountNumber: '2233344514', accountName: i18n.t(\"normalSaving\"), accountType: '1' }, { accountNumber: '123456789032', accountName: i18n.t(\"revolvingLoanNonTCG\"), accountType: '2' }]\n      const mockData = [{ accountName: 'Binding to TCRB Mobile Banking', accountBindingStatus: true, accountType: '1' }, { accountName: 'Binding to Micro Pay', accountBindingStatus: true, accountType: '2' }, { accountName: 'Binding to True Money Wallet', accountBindingStatus: true, accountType: '3' }]\n      const [stringAccount, setStringAccount] = useState([])\n      const [stringSwitch, setStringSwitch] = useState([])\n      const { customerServicesMenuStore, t } = props\n\n      useEffect(() => {\n        if (isSearch) {\n          setStringAccount(customerServicesMenuStore.accountInfo)\n        }\n      }, [customerServicesMenuStore.accountInfo])\n\n      useEffect(() => {\n        if (isSearch) {\n          if (customerServicesMenuStore.unbindAccountInfo.ok) {\n            convertArrayObjectToArray(mockData).then(result => {\n              customerServicesMenuStore.arrayUnbindAccountInfo = result\n              // setStringSwitch(result)\n              setStringSwitch(result)\n            })\n          }\n        }\n      }, [customerServicesMenuStore.unbindAccountInfo])\n\n      const searchIdCardNumber = async (value) => {\n        // console.log('eiei search:' + value)\n        // setIdCard(value)\n        setIsSearch(true)\n        // customerServicesMenuStore.setCitizenId(value)\n        await customerServicesMenuStore.getDataAccountUnbind(value)\n\n      }\n\n      const convertArrayObjectToArray = (arrayObject) => {\n        return new Promise((resolve, reject) => {\n          let result = arrayObject.map(accountDetail => [accountDetail.accountBindingStatus, accountDetail.main_account_no, accountDetail.product_name_english]);\n          resolve(result)\n        })\n      }\n\n      const selectAccount = async (selectedAccount) => {\n        console.log(toJS(selectedAccount))\n        // customerServicesMenuStore.setAccountId(selectedAccount.main_account_no)\n        await customerServicesMenuStore.getDataAccountProduct()\n        setViewDetail(true)\n\n      }\n      const onChange = (switchSelected, index) => {\n        // console.log(\"change:\" + value + \",indexOf :\" + index)\n\n        if (switchSelected.accountBindingStatus === true) {\n          // setVisble(true)\n          // switch (switchSelected.accountType) {\n          //   case '1':\n          //     setModalString(\n          //       <div style={{ textAlign: \"center\" }}>\n          //         <p>{t(\"unbinding\")}</p>\n          //         <p> {t(\"account\") + \" \" + customerServicesMenuStore.accountId} from Mobile Banking</p>\n          //       </div>\n          //     )\n          //     break;\n          //   case '2':\n          //     setModalString(\n          //       <div style={{ textAlign: \"center\" }}>\n          //         <p>{t(\"unbinding\")}</p>\n          //         <p> {t(\"account\") + \" \" + customerServicesMenuStore.accountId} from Micro Pay</p>\n          //       </div>\n          //     )\n          //     break;\n          //   case '3':\n          //     setModalString(\n          //       <div style={{ textAlign: \"center\" }}>\n          //         <p>{t(\"unbinding\")}</p>\n          //         <p> {t(\"account\") + \" \" + customerServicesMenuStore.accountId} from True Money Wallet</p>\n          //       </div>\n          //     )\n          //     break;\n          //   default:\n          //     break;\n          // }\n        } else {\n          // setIsChecked(false)\n        }\n      }\n\n      const unBindingAccount = async () => {\n        setVisble(false)\n        // call api\n        await customerServicesMenuStore.submitAccountUnbiding()\n      }\n\n      const AccountList = () => {\n        const listItems = stringAccount.map((string, index) =>\n          <Row key={index}>\n            <Col span={24}>\n              <StyledA onClick={() => { selectAccount(string) }}>{string.main_account_no}</StyledA><StyledSpan> {string.product_name_english}</StyledSpan>\n\n            </Col>\n          </Row>\n        );\n        return (\n          <ul>{listItems}</ul>\n        );\n      }\n      const newSearch = (\n        <div style={{ marginTop: 20 }}>\n          <Row gutter={[4, 24]}>\n            <SimpleSearch search={searchIdCardNumber} prefixWording={t(\"idCard\")} loading={customerServicesMenuStore.apiFetching} />\n          </Row>\n          {(isSearch) ? (\n            <AccountList />\n          ) : ('')}\n        </div>)\n\n      const accountDetail = (\n        <div style={{ margin: 20 }}>\n          {/* <Row gutter={[4, 24]}>\n        <Button onClick={() => setViewDetail(false)}>{i18n.t(\"back\")}</Button>\n      </Row> */}\n          <Row gutter={[4, 24]} align=\"top\">\n            <Col span={6}>\n              <StyledInput readOnly={true} prefix={t('accountNumber')} defaultValue={customerServicesMenuStore.accountId} />\n\n            </Col>\n          </Row>\n          <Row gutter={[4, 24]} align=\"middle\">\n            {/* <SwitchList /> */}\n            <SimpleSwitch\n              data={stringSwitch}\n              onChange={(switchSelected, index) => onChange(switchSelected, index)}\n            />\n            <SimpleModal\n              onOk={() => unBindingAccount()}\n              onCancel={() => setVisble(false)}\n              okText=\"Confirm\"\n              cancelText=\"Cancel\"\n              modalString={modalString}\n              visible={visible}\n            />\n          </Row>\n\n          <Row gutter={[4, 24]} align=\"bottom\" justify=\"center\">\n            <Col span={6}>\n              <Button shape=\"round\" onClick={() => setViewDetail(false)}>Back</Button>\n\n            </Col>\n          </Row>\n        </div>\n      )\n      return (viewDetail) ? accountDetail : newSearch\n    }))\nexport default withTranslation('common')(AccountUnbinding)\n"]},"metadata":{},"sourceType":"module"}