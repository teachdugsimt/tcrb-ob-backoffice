{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/admin/Desktop/tcrb-ob-project/tcrb-ob-backoffice-frontend/components/business-parameters-setup/otp-setup.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useEffect, useRef, useState } from 'react';\nimport { Input, Row, Col, Alert } from 'antd';\nimport styled from 'styled-components';\nimport { inject, observer } from 'mobx-react';\nimport { withTranslation } from '../../i18n';\nimport SimpleModal from '../simple-modal';\nimport { TcrbButton } from '../antd-styles/styles';\nvar StyledInput = styled(Input).withConfig({\n  displayName: \"otp-setup__StyledInput\",\n  componentId: \"y1xkpv-0\"\n})([\"background-color:unset !important;border:unset !important;border-bottom:1px solid black !important;box-shadow:none !important;.ant-input{text-align:right !important;background-color:unset !important;padding-right:8px !important;\", \"}.ant-input-suffix{width:50px !important;}\"], ''\n/* cursor:not-allowed !important; */\n);\n_c = StyledInput;\nvar OtpSetup = inject('businessParametersSetupStore')(observer(_s(function (props) {\n  _s();\n\n  var t = props.t,\n      businessParametersSetupStore = props.businessParametersSetupStore;\n\n  var _useState = useState(null),\n      expireOtp = _useState[0],\n      setExpire = _useState[1];\n\n  var _useState2 = useState(true),\n      visibleExpireEdit = _useState2[0],\n      setvisibleExpireEdit = _useState2[1];\n\n  var _useState3 = useState(false),\n      visibleExpireSubmit = _useState3[0],\n      setvisibleExpireSubmit = _useState3[1];\n\n  var _useState4 = useState(null),\n      newMaximumOtp = _useState4[0],\n      setNewMaximumOtp = _useState4[1];\n\n  var _useState5 = useState(true),\n      visibleEditMaximum = _useState5[0],\n      setvisibleEditMaximum = _useState5[1];\n\n  var _useState6 = useState(false),\n      visibleSubmitMaximum = _useState6[0],\n      setvisibleSubmitMaximum = _useState6[1];\n\n  var _useState7 = useState(false),\n      visible = _useState7[0],\n      setVisible = _useState7[1];\n\n  var _useState8 = useState(\"\"),\n      modalString = _useState8[0],\n      setModal = _useState8[1];\n\n  var _useState9 = useState(true),\n      isReadOnlyInputExpiration = _useState9[0],\n      setIsReadOnlyInputExpiration = _useState9[1];\n\n  var _useState10 = useState(true),\n      isReadOnlyInputMaximum = _useState10[0],\n      setIsReadOnlyInputMaximum = _useState10[1];\n\n  var _useState11 = useState(false),\n      isDisableEditExpiration = _useState11[0],\n      setIsDisableEditExpiration = _useState11[1];\n\n  var _useState12 = useState(false),\n      isDisableEditMaximum = _useState12[0],\n      setIsDisabledEditMaximum = _useState12[1];\n\n  var _useState13 = useState(false),\n      isDisableButtonEditExpiration = _useState13[0],\n      setIsDisableButtonEditExpiration = _useState13[1];\n\n  var _useState14 = useState(false),\n      isDisableButtonEditMaximum = _useState14[0],\n      setIsDisableButtonEditMaximum = _useState14[1];\n\n  var _useState15 = useState(\"\"),\n      titleModal = _useState15[0],\n      setTitleModal = _useState15[1];\n\n  var _useState16 = useState(\"\"),\n      modalType = _useState16[0],\n      setModalType = _useState16[1];\n\n  var _useState17 = useState(\"\"),\n      textCancel = _useState17[0],\n      setTextCancel = _useState17[1];\n\n  var _useState18 = useState(\"\"),\n      textOk = _useState18[0],\n      setTextOk = _useState18[1];\n\n  var _useState19 = useState(\"\"),\n      typeUpdate = _useState19[0],\n      setTypeUpdate = _useState19[1];\n\n  useEffect(function () {\n    if (!businessParametersSetupStore.responseGetOtpValue || businessParametersSetupStore.fetchingGetOtp == null) {\n      var data = {\n        otpParamsField: \"OTP_EXPIRE_TIME,OTP_MAXIMUM_ENTERED,OTP_TOKEN_EXPIRE_TIME\"\n      };\n      businessParametersSetupStore.getOTPdata(data);\n    }\n  }, []);\n  useEffect(function () {\n    var newProps = JSON.parse(JSON.stringify(businessParametersSetupStore.responseGetOtpValue));\n    console.log(\"Will Receive props : \", newProps);\n\n    if (newProps && newProps != undefined) {\n      if (!expireOtp || !newMaximumOtp) {\n        var tmpExpire = newProps.find(function (e) {\n          return e.Name == \"OTP_EXPIRE_TIME\";\n        });\n        var tmpMaximum = newProps.find(function (e) {\n          return e.Name == \"OTP_MAXIMUM_ENTERED\";\n        });\n        setExpire(tmpExpire.Value);\n        setNewMaximumOtp(tmpMaximum.Value);\n      }\n    }\n  }, [businessParametersSetupStore.responseGetOtpValue]);\n  useEffect(function () {\n    var newProps = JSON.parse(JSON.stringify(businessParametersSetupStore.responseUpdateOtp));\n    var fetch = businessParametersSetupStore.fetchingUpdateOtp;\n    var error = businessParametersSetupStore.errorUpdateOtp;\n    console.log(\"newProps >>>>\", newProps, fetch);\n\n    if (newProps && !fetch && !error) {\n      setVisible(true);\n      setModal(__jsx(\"div\", {\n        style: {\n          textAlign: 'center'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 20\n        }\n      }, \"Update\", \" \", typeUpdate, \" \", \"Success\", __jsx(\"br\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 92\n        }\n      }), \"Your changes will take effect after being approved.\"));\n      setTitleModal(\"Success\");\n      setModalType(\"close\");\n      setTextCancel(\"close\");\n    } else if (error) {\n      setVisible(true);\n      setModal(__jsx(\"div\", {\n        style: {\n          textAlign: 'center',\n          color: 'red'\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 20\n        }\n      }, \"Error Message : \", \" \", newProps.userMessage));\n      setTitleModal(\"Error\");\n      setModalType(\"error\");\n      setTextCancel(\"close\");\n    }\n  }, [businessParametersSetupStore.responseUpdateOtp]);\n\n  var _onClickExpiration = function _onClickExpiration() {\n    console.log(\"==edit Expiration==\");\n    setIsReadOnlyInputExpiration(false);\n    var expire = document.getElementById(\"otp-expiration-period\");\n    console.log(\"Expiration >>>\", expire);\n    expire.style.color = \"orange\";\n    expire.focus();\n    setvisibleExpireEdit(false);\n    setvisibleExpireSubmit(true);\n    setIsDisabledEditMaximum(true);\n  };\n\n  var _onClickMaximumRetry = function _onClickMaximumRetry() {\n    console.log(\"==edit Maximum==\");\n    setIsReadOnlyInputMaximum(false);\n    var maximum = document.getElementById(\"otp-maximum-retrying\");\n    console.log(\"Maximum >>>\", maximum);\n    maximum.style.color = \"orange\";\n    maximum.focus();\n    setvisibleEditMaximum(false);\n    setvisibleSubmitMaximum(true);\n    setIsDisableEditExpiration(true);\n  };\n\n  var _openPopup = function _openPopup(text) {\n    setVisible(true);\n\n    if (text == \"maximum\") {\n      var currentMaximumOtp = getValueFromStore(\"maximum\");\n      console.log(newMaximumOtp);\n\n      if (newMaximumOtp == currentMaximumOtp) {\n        setModal(__jsx(\"div\", {\n          style: {\n            textAlign: 'center',\n            color: 'red'\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 22\n          }\n        }, \"Error: OTP Maximum is not change \", __jsx(\"br\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 106\n          }\n        }), \"value : \", newMaximumOtp));\n        setTitleModal(\"Error\");\n        setModalType(\"error\");\n        setTextCancel(\"cancel\");\n      } else if (!newMaximumOtp) {\n        setModal(__jsx(\"div\", {\n          style: {\n            textAlign: 'center',\n            color: 'red'\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 22\n          }\n        }, \"Error: OTP Maximum is not empty\"));\n        setTitleModal(\"Error\");\n        setModalType(\"error\");\n        setTextCancel(\"cancel\");\n      } else {\n        setModal(__jsx(\"div\", {\n          style: {\n            textAlign: 'center'\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 22\n          }\n        }, \"Confirm update OTP \", text, \" Retrying !!!\", __jsx(\"br\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 97\n          }\n        }), currentMaximumOtp, \" to \", newMaximumOtp));\n        setTitleModal(\"Confirm\");\n        setModalType(\"confirm\");\n        setTextCancel(\"cancel\");\n        setTextOk(\"confirm\");\n      }\n    } else {\n      var currentExpireOtp = getValueFromStore(\"expire\");\n\n      if (expireOtp == currentExpireOtp) {\n        setModal(__jsx(\"div\", {\n          style: {\n            textAlign: 'center',\n            color: 'red'\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 22\n          }\n        }, \"Error: OTP Expire is not change \", __jsx(\"br\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 105\n          }\n        }), \"value : \", expireOtp));\n        setTitleModal(\"Error\");\n        setModalType(\"error\");\n        setTextCancel(\"cancel\");\n      } else if (!expireOtp) {\n        setModal(__jsx(\"div\", {\n          style: {\n            textAlign: 'center',\n            color: 'red'\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 22\n          }\n        }, \"Error: OTP Expire is not empty\"));\n        setTitleModal(\"Error\");\n        setModalType(\"error\");\n        setTextCancel(\"cancel\");\n      } else {\n        setModal(__jsx(\"div\", {\n          style: {\n            textAlign: 'center'\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 22\n          }\n        }, \"Confirm update OTP \", text, \" Period !!!\", __jsx(\"br\", {\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 95\n          }\n        }), currentExpireOtp, \" to \", expireOtp));\n        setTitleModal(\"Confirm\");\n        setModalType(\"confirm\");\n        setTextCancel(\"cancel\");\n        setTextOk(\"confirm\");\n      }\n    }\n  };\n\n  var _setUnfocus = function _setUnfocus(type) {\n    if (type == \"expire\") {\n      var expire = document.getElementById(\"otp-expiration-period\");\n      expire.style.color = \"rgba(0, 0, 0, 0.65)\";\n      expire.blur();\n    } else {\n      var maximum = document.getElementById(\"otp-maximum-retrying\");\n      maximum.style.color = \"rgba(0, 0, 0, 0.65)\";\n      maximum.focus();\n    }\n  };\n\n  var _onConfirm = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var a, b, data, _data;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              a = getValueFromStore(\"maximum\");\n              b = getValueFromStore(\"expire\");\n\n              if (!(a != newMaximumOtp)) {\n                _context.next = 15;\n                break;\n              }\n\n              console.log(\"update >>>\", newMaximumOtp);\n              data = {\n                currentData: {\n                  OTP_MAXIMUM_ENTERED: a\n                },\n                newData: {\n                  OTP_MAXIMUM_ENTERED: newMaximumOtp\n                },\n                maker_id: 51\n              };\n              setVisible(false);\n              setIsReadOnlyInputMaximum(true);\n              setvisibleEditMaximum(true);\n              setvisibleSubmitMaximum(false);\n              setIsDisableEditExpiration(false);\n\n              _setUnfocus(\"maximum\");\n\n              setNewMaximumOtp(a);\n              setTypeUpdate(\"Maximum OTP\");\n              _context.next = 15;\n              return businessParametersSetupStore.updateOTPdata(data);\n\n            case 15:\n              if (!(b != expireOtp)) {\n                _context.next = 28;\n                break;\n              }\n\n              console.log(\"update >>>\", expireOtp);\n              _data = {\n                currentData: {\n                  OTP_EXPIRE_TIME: b\n                },\n                newData: {\n                  OTP_EXPIRE_TIME: expireOtp\n                },\n                maker_id: 59\n              };\n              setVisible(false);\n              setIsReadOnlyInputExpiration(true);\n              setvisibleExpireEdit(true);\n              setvisibleExpireSubmit(false);\n              setIsDisabledEditMaximum(false);\n\n              _setUnfocus(\"expire\");\n\n              setExpire(b);\n              setTypeUpdate(\"Expire OTP\");\n              _context.next = 28;\n              return businessParametersSetupStore.updateOTPdata(_data);\n\n            case 28:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function _onConfirm() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var getValueFromStore = function getValueFromStore(type) {\n    var old_data = JSON.parse(JSON.stringify(businessParametersSetupStore.responseGetOtpValue));\n    console.log(old_data);\n\n    if (type == \"expire\") {\n      var tmpExpire = old_data.find(function (oldData) {\n        return oldData.Name == \"OTP_EXPIRE_TIME\";\n      });\n      return tmpExpire.Value;\n    } else {\n      var tmpMaximum = old_data.find(function (oldData) {\n        return oldData.Name == \"OTP_MAXIMUM_ENTERED\";\n      });\n      return tmpMaximum.Value;\n    }\n  };\n\n  var _onCancel = function _onCancel() {\n    setVisible(false);\n    var currentMaximum = getValueFromStore(\"maximum\");\n    var currentExpire = getValueFromStore(\"expire\");\n    setNewMaximumOtp(currentMaximum);\n    setIsReadOnlyInputMaximum(true);\n    setvisibleEditMaximum(true);\n    setvisibleSubmitMaximum(false);\n    setIsDisableEditExpiration(false);\n    setExpire(currentExpire);\n    setIsReadOnlyInputExpiration(true);\n    setvisibleExpireEdit(true);\n    setvisibleExpireSubmit(false);\n    setIsDisabledEditMaximum(false);\n    var expire = document.getElementById(\"otp-expiration-period\");\n    var maximum = document.getElementById(\"otp-maximum-retrying\");\n    expire.style.color = \"rgba(0, 0, 0, 0.65)\";\n    expire.blur();\n    maximum.style.color = \"rgba(0, 0, 0, 0.65)\";\n    maximum.blur();\n  };\n\n  return __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 9\n    }\n  }, __jsx(Row, {\n    gutter: [8, 8],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 11\n    }\n  }, __jsx(Col, {\n    span: 10,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 13\n    }\n  }, __jsx(StyledInput, {\n    readOnly: isReadOnlyInputMaximum,\n    id: \"otp-maximum-retrying\",\n    disabled: isDisableEditMaximum,\n    value: newMaximumOtp,\n    onChange: function onChange(e) {\n      return setNewMaximumOtp(e.target.value);\n    },\n    prefix: t(\"otpMaximumRetrying\"),\n    suffix: t(\"otpTime\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 15\n    }\n  })), __jsx(Col, {\n    span: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 13\n    }\n  }, visibleEditMaximum && __jsx(TcrbButton, {\n    disabled: isDisableEditMaximum,\n    onClick: function onClick() {\n      return _onClickMaximumRetry();\n    },\n    className: \"default\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 38\n    }\n  }, t(\"edit\")), visibleSubmitMaximum && __jsx(TcrbButton, {\n    onClick: function onClick() {\n      return _openPopup(\"maximum\");\n    },\n    className: \"default\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 40\n    }\n  }, t(\"submit\")))), __jsx(Row, {\n    gutter: [8, 8],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 11\n    }\n  }, __jsx(Col, {\n    span: 10,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 13\n    }\n  }, __jsx(StyledInput, {\n    readOnly: isReadOnlyInputExpiration,\n    disabled: isDisableEditExpiration,\n    id: \"otp-expiration-period\",\n    value: expireOtp,\n    onChange: function onChange(e) {\n      return setExpire(e.target.value);\n    },\n    prefix: t(\"otpExpirationPeriod\"),\n    suffix: t(\"otpSecond\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 15\n    }\n  })), __jsx(Col, {\n    span: 6,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 13\n    }\n  }, visibleExpireEdit && __jsx(TcrbButton, {\n    disabled: isDisableEditExpiration,\n    onClick: function onClick() {\n      return _onClickExpiration();\n    },\n    className: \"default\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 37\n    }\n  }, t(\"edit\")), visibleExpireSubmit && __jsx(TcrbButton, {\n    onClick: function onClick() {\n      return _openPopup(\"expire\");\n    },\n    className: \"default\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 39\n    }\n  }, t(\"submit\")))), __jsx(SimpleModal, {\n    title: titleModal,\n    type: modalType,\n    onOk: function onOk() {\n      return _onConfirm();\n    },\n    onCancel: function onCancel() {\n      return _onCancel();\n    },\n    textCancel: textCancel,\n    textOk: textOk,\n    modalString: modalString,\n    visible: visible,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 11\n    }\n  }));\n}, \"Sf/coeqPnnoJqqDGv8Xv10sZVxg=\")));\nexport default withTranslation('common')(OtpSetup);\n\nvar _c;\n\n$RefreshReg$(_c, \"StyledInput\");","map":{"version":3,"sources":["/Users/admin/Desktop/tcrb-ob-project/tcrb-ob-backoffice-frontend/components/business-parameters-setup/otp-setup.js"],"names":["React","useEffect","useRef","useState","Input","Row","Col","Alert","styled","inject","observer","withTranslation","SimpleModal","TcrbButton","StyledInput","OtpSetup","props","t","businessParametersSetupStore","expireOtp","setExpire","visibleExpireEdit","setvisibleExpireEdit","visibleExpireSubmit","setvisibleExpireSubmit","newMaximumOtp","setNewMaximumOtp","visibleEditMaximum","setvisibleEditMaximum","visibleSubmitMaximum","setvisibleSubmitMaximum","visible","setVisible","modalString","setModal","isReadOnlyInputExpiration","setIsReadOnlyInputExpiration","isReadOnlyInputMaximum","setIsReadOnlyInputMaximum","isDisableEditExpiration","setIsDisableEditExpiration","isDisableEditMaximum","setIsDisabledEditMaximum","isDisableButtonEditExpiration","setIsDisableButtonEditExpiration","isDisableButtonEditMaximum","setIsDisableButtonEditMaximum","titleModal","setTitleModal","modalType","setModalType","textCancel","setTextCancel","textOk","setTextOk","typeUpdate","setTypeUpdate","responseGetOtpValue","fetchingGetOtp","data","otpParamsField","getOTPdata","newProps","JSON","parse","stringify","console","log","undefined","tmpExpire","find","e","Name","tmpMaximum","Value","responseUpdateOtp","fetch","fetchingUpdateOtp","error","errorUpdateOtp","textAlign","color","userMessage","_onClickExpiration","expire","document","getElementById","style","focus","_onClickMaximumRetry","maximum","_openPopup","text","currentMaximumOtp","getValueFromStore","currentExpireOtp","_setUnfocus","type","blur","_onConfirm","a","b","currentData","OTP_MAXIMUM_ENTERED","newData","maker_id","updateOTPdata","OTP_EXPIRE_TIME","old_data","oldData","_onCancel","currentMaximum","currentExpire","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react'\nimport { Input, Row, Col, Alert } from 'antd'\nimport styled from 'styled-components'\nimport { inject, observer } from 'mobx-react'\nimport { withTranslation } from '../../i18n'\nimport SimpleModal from '../simple-modal'\nimport { TcrbButton } from '../antd-styles/styles'\n\nconst StyledInput = styled(Input)`\n  background-color: unset !important;\n  border: unset !important;\n  border-bottom: 1px solid black !important;\n  box-shadow: none !important;\n  .ant-input{\n    text-align: right !important;\n    background-color: unset !important;\n    padding-right:8px !important;\n    ${'' /* cursor:not-allowed !important; */}\n  }\n  .ant-input-suffix{\n            width:50px !important;\n          }\n`\n\nconst OtpSetup =\n  inject('businessParametersSetupStore')\n    (observer((props) => {\n      const { t, businessParametersSetupStore } = props\n      const [expireOtp, setExpire] = useState(null)\n      const [visibleExpireEdit, setvisibleExpireEdit] = useState(true)\n      const [visibleExpireSubmit, setvisibleExpireSubmit] = useState(false)\n\n      const [newMaximumOtp, setNewMaximumOtp] = useState(null)\n      const [visibleEditMaximum, setvisibleEditMaximum] = useState(true)\n      const [visibleSubmitMaximum, setvisibleSubmitMaximum] = useState(false)\n\n      const [visible, setVisible] = useState(false)\n      const [modalString, setModal] = useState(\"\")\n      const [isReadOnlyInputExpiration, setIsReadOnlyInputExpiration] = useState(true)\n      const [isReadOnlyInputMaximum, setIsReadOnlyInputMaximum] = useState(true)\n      const [isDisableEditExpiration, setIsDisableEditExpiration] = useState(false)\n      const [isDisableEditMaximum, setIsDisabledEditMaximum] = useState(false)\n      const [isDisableButtonEditExpiration, setIsDisableButtonEditExpiration] = useState(false)\n      const [isDisableButtonEditMaximum, setIsDisableButtonEditMaximum] = useState(false)\n\n      const [titleModal, setTitleModal] = useState(\"\")\n      const [modalType, setModalType] = useState(\"\")\n      const [textCancel, setTextCancel] = useState(\"\")\n      const [textOk, setTextOk] = useState(\"\")\n      const [typeUpdate, setTypeUpdate] = useState(\"\")\n\n      useEffect(() => {\n\n        if (!businessParametersSetupStore.responseGetOtpValue || businessParametersSetupStore.fetchingGetOtp == null) {\n          let data = { otpParamsField: \"OTP_EXPIRE_TIME,OTP_MAXIMUM_ENTERED,OTP_TOKEN_EXPIRE_TIME\" }\n          businessParametersSetupStore.getOTPdata(data)\n        }\n      }, [])\n\n      useEffect(() => {\n\n        let newProps = JSON.parse(JSON.stringify(businessParametersSetupStore.responseGetOtpValue))\n        console.log(\"Will Receive props : \", newProps)\n        if (newProps && newProps != undefined) {\n          if (!expireOtp || !newMaximumOtp) {\n            let tmpExpire = newProps.find(e => e.Name == \"OTP_EXPIRE_TIME\")\n            let tmpMaximum = newProps.find(e => e.Name == \"OTP_MAXIMUM_ENTERED\")\n            setExpire(tmpExpire.Value)\n            setNewMaximumOtp(tmpMaximum.Value)\n          }\n        }\n      }, [businessParametersSetupStore.responseGetOtpValue])\n\n      useEffect(() => {\n        let newProps = JSON.parse(JSON.stringify(businessParametersSetupStore.responseUpdateOtp))\n        let fetch = businessParametersSetupStore.fetchingUpdateOtp\n        let error = businessParametersSetupStore.errorUpdateOtp\n        console.log(\"newProps >>>>\", newProps, fetch)\n        if ((newProps && !fetch) && !error) {\n          setVisible(true)\n          setModal(<div style={{ textAlign: 'center' }}>Update{\" \"}{typeUpdate}{\" \"}Success<br />Your changes will take effect after being approved.</div>)\n          setTitleModal(\"Success\")\n          setModalType(\"close\")\n          setTextCancel(\"close\")\n        } else if (error) {\n          setVisible(true)\n          setModal(<div style={{ textAlign: 'center', color: 'red' }}>Error Message : {\" \"}{newProps.userMessage}</div>)\n          setTitleModal(\"Error\")\n          setModalType(\"error\")\n          setTextCancel(\"close\")\n        }\n\n      }, [businessParametersSetupStore.responseUpdateOtp])\n\n      const _onClickExpiration = () => {\n        console.log(\"==edit Expiration==\")\n        setIsReadOnlyInputExpiration(false)\n        let expire = document.getElementById(\"otp-expiration-period\")\n        console.log(\"Expiration >>>\", expire)\n        expire.style.color = \"orange\"\n        expire.focus()\n        setvisibleExpireEdit(false)\n        setvisibleExpireSubmit(true)\n        setIsDisabledEditMaximum(true)\n      }\n\n      const _onClickMaximumRetry = () => {\n        console.log(\"==edit Maximum==\")\n        setIsReadOnlyInputMaximum(false)\n        let maximum = document.getElementById(\"otp-maximum-retrying\")\n        console.log(\"Maximum >>>\", maximum)\n        maximum.style.color = \"orange\"\n        maximum.focus()\n        setvisibleEditMaximum(false)\n        setvisibleSubmitMaximum(true)\n        setIsDisableEditExpiration(true)\n      }\n\n      const _openPopup = (text) => {\n        setVisible(true)\n        if (text == \"maximum\") {\n          let currentMaximumOtp = getValueFromStore(\"maximum\")\n          console.log(newMaximumOtp)\n          if (newMaximumOtp == currentMaximumOtp) {\n            setModal(<div style={{ textAlign: 'center', color: 'red' }}>Error: OTP Maximum is not change <br />value : {newMaximumOtp}</div>)\n            setTitleModal(\"Error\")\n            setModalType(\"error\")\n            setTextCancel(\"cancel\")\n          }\n          else if (!newMaximumOtp) {\n            setModal(<div style={{ textAlign: 'center', color: 'red' }}>Error: OTP Maximum is not empty</div>)\n            setTitleModal(\"Error\")\n            setModalType(\"error\")\n            setTextCancel(\"cancel\")\n          }\n          else {\n            setModal(<div style={{ textAlign: 'center' }}>Confirm update OTP {text} Retrying !!!<br />{currentMaximumOtp} to {newMaximumOtp}</div>)\n            setTitleModal(\"Confirm\")\n            setModalType(\"confirm\")\n            setTextCancel(\"cancel\")\n            setTextOk(\"confirm\")\n          }\n        }\n        else {\n          let currentExpireOtp = getValueFromStore(\"expire\")\n          if (expireOtp == currentExpireOtp) {\n            setModal(<div style={{ textAlign: 'center', color: 'red' }}>Error: OTP Expire is not change <br />value : {expireOtp}</div>)\n            setTitleModal(\"Error\")\n            setModalType(\"error\")\n            setTextCancel(\"cancel\")\n          }\n          else if (!expireOtp) {\n            setModal(<div style={{ textAlign: 'center', color: 'red' }}>Error: OTP Expire is not empty</div>)\n            setTitleModal(\"Error\")\n            setModalType(\"error\")\n            setTextCancel(\"cancel\")\n          }\n          else {\n            setModal(<div style={{ textAlign: 'center' }}>Confirm update OTP {text} Period !!!<br />{currentExpireOtp} to {expireOtp}</div>)\n            setTitleModal(\"Confirm\")\n            setModalType(\"confirm\")\n            setTextCancel(\"cancel\")\n            setTextOk(\"confirm\")\n          }\n        }\n\n      }\n\n      const _setUnfocus = (type) => {\n        if (type == \"expire\") {\n          let expire = document.getElementById(\"otp-expiration-period\")\n          expire.style.color = \"rgba(0, 0, 0, 0.65)\"\n          expire.blur()\n        } else {\n          let maximum = document.getElementById(\"otp-maximum-retrying\")\n          maximum.style.color = \"rgba(0, 0, 0, 0.65)\"\n          maximum.focus()\n        }\n      }\n\n      const _onConfirm = async () => {\n        let a = getValueFromStore(\"maximum\")\n        let b = getValueFromStore(\"expire\")\n        if (a != newMaximumOtp) {\n          console.log(\"update >>>\", newMaximumOtp)\n\n          let data = {\n            currentData: {\n              OTP_MAXIMUM_ENTERED: a\n            },\n            newData: {\n              OTP_MAXIMUM_ENTERED: newMaximumOtp\n            },\n            maker_id: 51\n          }\n          setVisible(false)\n          setIsReadOnlyInputMaximum(true)\n          setvisibleEditMaximum(true)\n          setvisibleSubmitMaximum(false)\n          setIsDisableEditExpiration(false)\n          _setUnfocus(\"maximum\")\n          setNewMaximumOtp(a)\n          setTypeUpdate(\"Maximum OTP\")\n          await businessParametersSetupStore.updateOTPdata(data)\n\n        }\n        if (b != expireOtp) {\n          console.log(\"update >>>\", expireOtp)\n          let data = {\n            currentData: {\n              OTP_EXPIRE_TIME: b\n            },\n            newData: {\n              OTP_EXPIRE_TIME: expireOtp\n            },\n            maker_id: 59\n          }\n\n          setVisible(false)\n          setIsReadOnlyInputExpiration(true)\n          setvisibleExpireEdit(true)\n          setvisibleExpireSubmit(false)\n          setIsDisabledEditMaximum(false)\n          _setUnfocus(\"expire\")\n          setExpire(b)\n          setTypeUpdate(\"Expire OTP\")\n          await businessParametersSetupStore.updateOTPdata(data)\n\n        }\n      }\n\n      const getValueFromStore = (type) => {\n        let old_data = JSON.parse(JSON.stringify(businessParametersSetupStore.responseGetOtpValue))\n        console.log(old_data)\n        if (type == \"expire\") {\n          let tmpExpire = old_data.find(oldData => oldData.Name == \"OTP_EXPIRE_TIME\")\n          return tmpExpire.Value\n        } else {\n          let tmpMaximum = old_data.find(oldData => oldData.Name == \"OTP_MAXIMUM_ENTERED\")\n          return tmpMaximum.Value\n        }\n      }\n\n      const _onCancel = () => {\n        setVisible(false)\n        let currentMaximum = getValueFromStore(\"maximum\")\n        let currentExpire = getValueFromStore(\"expire\")\n\n        setNewMaximumOtp(currentMaximum)\n        setIsReadOnlyInputMaximum(true)\n        setvisibleEditMaximum(true)\n        setvisibleSubmitMaximum(false)\n        setIsDisableEditExpiration(false)\n\n        setExpire(currentExpire)\n        setIsReadOnlyInputExpiration(true)\n        setvisibleExpireEdit(true)\n        setvisibleExpireSubmit(false)\n        setIsDisabledEditMaximum(false)\n\n        let expire = document.getElementById(\"otp-expiration-period\")\n        let maximum = document.getElementById(\"otp-maximum-retrying\")\n        expire.style.color = \"rgba(0, 0, 0, 0.65)\"\n        expire.blur()\n        maximum.style.color = \"rgba(0, 0, 0, 0.65)\"\n        maximum.blur()\n      }\n\n      return (\n        <div>\n          <Row gutter={[8, 8]}>\n            <Col span={10}>\n              <StyledInput readOnly={isReadOnlyInputMaximum} id={\"otp-maximum-retrying\"} disabled={isDisableEditMaximum} value={newMaximumOtp} onChange={(e) => setNewMaximumOtp(e.target.value)} prefix={t(\"otpMaximumRetrying\")} suffix={t(\"otpTime\")} />\n            </Col>\n            <Col span={6}>\n              {visibleEditMaximum && <TcrbButton disabled={isDisableEditMaximum} onClick={() => _onClickMaximumRetry()} className=\"default\">{t(\"edit\")}</TcrbButton>}\n              {visibleSubmitMaximum && <TcrbButton onClick={() => _openPopup(\"maximum\")} className=\"default\">{t(\"submit\")}</TcrbButton>}\n            </Col>\n          </Row>\n          <Row gutter={[8, 8]}>\n            <Col span={10}>\n              <StyledInput readOnly={isReadOnlyInputExpiration} disabled={isDisableEditExpiration} id={\"otp-expiration-period\"} value={expireOtp} onChange={(e) => setExpire(e.target.value)} prefix={t(\"otpExpirationPeriod\")} suffix={t(\"otpSecond\")} />\n            </Col>\n            <Col span={6}>\n              {visibleExpireEdit && <TcrbButton disabled={isDisableEditExpiration} onClick={() => _onClickExpiration()} className=\"default\">{t(\"edit\")}</TcrbButton>}\n              {visibleExpireSubmit && <TcrbButton onClick={() => _openPopup(\"expire\")} className=\"default\">{t(\"submit\")}</TcrbButton>}\n            </Col>\n          </Row>\n          <SimpleModal\n            title={titleModal}\n            type={modalType}\n            onOk={() => _onConfirm()}\n            onCancel={() => _onCancel()}\n            textCancel={textCancel}\n            textOk={textOk}\n            modalString={modalString}\n            visible={visible}\n          />\n        </div>\n      )\n    }))\n\nexport default withTranslation('common')(OtpSetup)\n"]},"metadata":{},"sourceType":"module"}