{"ast":null,"code":"import \"antd/lib/table/style\";\nimport _Table from \"antd/lib/table\";\nimport \"antd/lib/button/style\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/card/style\";\nimport _Card from \"antd/lib/card\";\nimport \"antd/lib/row/style\";\nimport _Row from \"antd/lib/row\";\nimport \"antd/lib/col/style\";\nimport _Col from \"antd/lib/col\";\nimport \"antd/lib/popconfirm/style\";\nimport _Popconfirm from \"antd/lib/popconfirm\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport \"antd/lib/input/style\";\nimport _Input from \"antd/lib/input\";\nimport \"antd/lib/input-number/style\";\nimport _InputNumber from \"antd/lib/input-number\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport \"antd/lib/form/style\";\nimport _Form from \"antd/lib/form\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport \"antd/lib/select/style\";\nimport _Select from \"antd/lib/select\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/admin/Desktop/tcrb-ob-project/tcrb-ob-backoffice-frontend/components/business-parameters-setup/product-limit-setup.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect, createRef } from 'react';\nimport { inject, observer } from 'mobx-react';\nimport { withTranslation } from '../../i18n';\nimport styled from 'styled-components';\nimport { toJS } from 'mobx';\nimport SimpleMenu from '../simple-menu';\nimport SimpleInput from '../simple-input';\nimport SimpleModal from '../simple-modal';\nvar Option = _Select.Option;\nvar ProductLimitSetup = inject('businessParametersSetupStore')(observer(_s(function (props) {\n  _s();\n\n  var _useState = useState([]),\n      dataSource = _useState[0],\n      setDataSource = _useState[1];\n\n  var _useState2 = useState(false),\n      viewDetailProduct = _useState2[0],\n      setViewDetailProduct = _useState2[1];\n\n  var _useState3 = useState(false),\n      visible = _useState3[0],\n      setVisble = _useState3[1];\n\n  var _useState4 = useState(''),\n      modalString = _useState4[0],\n      setModalString = _useState4[1];\n\n  var _useState5 = useState(false),\n      showLimitPartner = _useState5[0],\n      setShowLimitPartner = _useState5[1];\n\n  var _useState6 = useState(''),\n      editingKey = _useState6[0],\n      setEditingKey = _useState6[1];\n\n  var _useState7 = useState(''),\n      titleModal = _useState7[0],\n      setTitleModal = _useState7[1];\n\n  var _useState8 = useState(''),\n      modalType = _useState8[0],\n      setModalType = _useState8[1];\n\n  var _useState9 = useState({}),\n      selectPartnerAndProduct = _useState9[0],\n      setSelectPartnerAndProduct = _useState9[1];\n\n  var _useState10 = useState([]),\n      channelPartnerList = _useState10[0],\n      setChannelPartnerList = _useState10[1];\n\n  var _useState11 = useState([]),\n      productList = _useState11[0],\n      setProductList = _useState11[1];\n\n  var _useState12 = useState(false),\n      viewSpecificProduct = _useState12[0],\n      setViewSpecificProduct = _useState12[1];\n\n  var businessParametersSetupStore = props.businessParametersSetupStore,\n      t = props.t;\n\n  var _Form$useForm = _Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  var txnLimit,\n      dailyLimit = ''; // var selectPartnerAndProduct = {}\n\n  var isEditing = function isEditing(record) {\n    return record.key === editingKey;\n  };\n\n  var edit = function edit(record) {\n    form.setFieldsValue(_objectSpread({\n      product_type: '',\n      product_description: '',\n      transaction_limit: '',\n      daily_limit: '',\n      Specific: ''\n    }, record));\n    setEditingKey(record.key);\n  };\n\n  var EditableCell = function EditableCell(_ref) {\n    var editing = _ref.editing,\n        dataIndex = _ref.dataIndex,\n        title = _ref.title,\n        inputType = _ref.inputType,\n        record = _ref.record,\n        index = _ref.index,\n        children = _ref.children,\n        restProps = _objectWithoutProperties(_ref, [\"editing\", \"dataIndex\", \"title\", \"inputType\", \"record\", \"index\", \"children\"]);\n\n    var inputNode = inputType === 'number' ? __jsx(_InputNumber, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 52\n      }\n    }) : __jsx(_Input, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 70\n      }\n    });\n    return __jsx(\"td\", _extends({}, restProps, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }\n    }), editing ? __jsx(_Form.Item, {\n      name: dataIndex == 'product_type' ? 'product_code' : dataIndex,\n      style: {\n        margin: 0\n      },\n      rules: [{\n        required: inputType === 'number' ? true : false,\n        message: \"Please Input \".concat(title, \"!\")\n      }],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 15\n      }\n    }, dataIndex == 'product_type' ? __jsx(_Select, {\n      style: {\n        width: '100%'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 19\n      }\n    }, productList.map(function (item, index) {\n      return __jsx(Option, {\n        key: index,\n        value: item.product_code,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 55\n        }\n      }, item.product_type);\n    })) : __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 21\n      }\n    }, inputNode)) : children);\n  };\n\n  useEffect(function () {\n    // setDataSource(mockDataSource)\n    businessParametersSetupStore.getDataProductLimit();\n    businessParametersSetupStore.getDataChannelPartnerList();\n    businessParametersSetupStore.getDataProductList();\n  }, []);\n  useEffect(function () {\n    if (businessParametersSetupStore.productLimit.length > 0) {\n      addKeyToDataSource(businessParametersSetupStore.productLimit).then(function (result) {\n        businessParametersSetupStore.arrayProductLimit = result;\n        setDataSource(result);\n      });\n    }\n  }, [businessParametersSetupStore.productLimit]);\n  useEffect(function () {\n    //if(businessParametersSetupStore.productLimitDetail)\n    console.log(toJS(businessParametersSetupStore.productLimitDetail));\n\n    if (businessParametersSetupStore.productLimitDetail != null) {\n      setViewDetailProduct(true);\n    }\n  }, [businessParametersSetupStore.productLimitDetail]);\n  useEffect(function () {\n    if (businessParametersSetupStore.channelPartnerList.length > 1) {\n      setChannelPartnerList(businessParametersSetupStore.channelPartnerList);\n    }\n  }, [businessParametersSetupStore.channelPartnerList]);\n  useEffect(function () {\n    if (businessParametersSetupStore.productList.length > 1) {\n      setProductList(businessParametersSetupStore.productList);\n    }\n  }, [businessParametersSetupStore.productList]);\n\n  var handleDelete = function handleDelete(key) {\n    // const dataSource = [...this.state.dataSource];\n    // setDataSource(dataSource.filter(item => item.key !== key))\n    console.log(key);\n  };\n\n  var addKeyToDataSource = function addKeyToDataSource(arrayDataSource) {\n    var newDataSource = arrayDataSource;\n\n    for (var index = 0; index < newDataSource.length; index++) {\n      newDataSource[index].key = index + 1;\n    }\n\n    return new Promise(function (resolve) {\n      resolve(newDataSource);\n    });\n  };\n\n  var convertToArrayOptionSelect = function convertToArrayOptionSelect(arrayObject) {\n    var result = arrayObject.map(function (partnerList) {\n      return [partnerList.partner_code, partnerList.partner_code + '/' + partnerList.partner_abbreviation];\n    });\n    return new Promise(function (resolve) {\n      return resolve(result);\n    });\n  };\n\n  var submitChangeLimit = function submitChangeLimit() {// txnLimit, dailyLimit\n    // call api\n  };\n\n  var submitChangeProductLimitSelect = function submitChangeProductLimitSelect() {\n    //call api\n    setVisble(true);\n    setTitleModal('Confirm');\n    setModalType(\"confirm\");\n    setModalString(__jsx(\"div\", {\n      style: {\n        textAlign: \"center\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 11\n      }\n    }, __jsx(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 13\n      }\n    }, \" Change Product Code \", selectPartnerAndProduct.partner_code, \" Limit \"), __jsx(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 13\n      }\n    }, \"for \", selectPartnerAndProduct.partner_code, \"/\", selectPartnerAndProduct.partner_abbreviation, \" Channel/Partner !!!\")));\n  };\n\n  var selectPartnerChanel = function selectPartnerChanel(value) {\n    var productSelectObject = channelPartnerList.filter(function (item) {\n      return item.partner_code == value;\n    });\n    setSelectPartnerAndProduct(productSelectObject[0]); //partner_code, product_code\n\n    setShowLimitPartner(true);\n  };\n\n  var selectProductToViewDetail = function selectProductToViewDetail(rowSelected) {\n    //call api to get Detail Product\n    businessParametersSetupStore.getDataDetailProductLimit(rowSelected.product_code); // businessParametersSetupStore.getDataChannelPartnerList()\n  };\n\n  var selectS = function selectS() {\n    viewSpecificProduct;\n  };\n\n  var addRowProductList = function addRowProductList() {\n    var newProduct = {\n      key: dataSource.length + 1,\n      product_code: '',\n      product_description: '',\n      transaction_limit: '',\n      daily_limit: '',\n      Specific: ''\n    };\n    setDataSource([].concat(_toConsumableArray(dataSource), [newProduct]));\n    edit(newProduct);\n    businessParametersSetupStore.arrayProductLimit = dataSource;\n  };\n\n  var goBackProductList = function goBackProductList() {\n    setViewDetailProduct(false);\n  };\n\n  var submitAddnewProduct = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(key) {\n      var row, testFilter, newData, index, item;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return form.validateFields();\n\n            case 2:\n              row = _context.sent;\n              row.status = 2;\n              row.transaction_code = \"6931\";\n              testFilter = productList.filter(function (item) {\n                return row.product_code === item.product_code;\n              });\n              console.log(toJS(testFilter));\n              console.log(row);\n              newData = _toConsumableArray(dataSource);\n              index = newData.findIndex(function (item) {\n                return key === item.key;\n              });\n\n              if (index > -1) {\n                item = newData[index];\n                newData.splice(index, 1, _objectSpread(_objectSpread({}, item), row));\n                setDataSource(newData);\n                setEditingKey('');\n              } else {\n                newData.push(row);\n                setDataSource(newData);\n                setEditingKey('');\n              } //businessParametersSetupStore.addNewProductLimit(row)\n\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function submitAddnewProduct(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var submitDeleteProduct = function submitDeleteProduct(record) {\n    //call api to update record status\n    dataSource.map(function (detailDataSource) {\n      if (detailDataSource.key === record.key) {\n        record.status = 2;\n      }\n    });\n    console.log(toJS(dataSource)); //businessParametersSetupStore.deleteProductLimit(record)\n\n    setDataSource(dataSource); //<<waiting result api and  add key index\n  };\n\n  var renderOnclickHandler = function renderOnclickHandler(text, record) {\n    return __jsx(\"p\", {\n      onClick: function onClick() {\n        return selectProductToViewDetail(record);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 16\n      }\n    }, text);\n  };\n\n  var renderActionAddDeleteHandler = function renderActionAddDeleteHandler(record, index) {\n    if (index + 1 <= businessParametersSetupStore.arrayProductLimit.length) {\n      return __jsx(_Popconfirm, {\n        title: \"Sure to delete?\",\n        onConfirm: function onConfirm(e) {\n          submitDeleteProduct(record);\n        },\n        disabled: editingKey !== '',\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 18\n        }\n      }, __jsx(\"a\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 13\n        }\n      }, \"Delete\"));\n    } else if (record.status === 2) {\n      return null;\n    } else {\n      return __jsx(_Popconfirm, {\n        title: \"Confirm to add !!!\",\n        onConfirm: function onConfirm() {\n          submitAddnewProduct(record.key);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 18\n        }\n      }, __jsx(\"a\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 13\n        }\n      }, \"confirm\"));\n    }\n  };\n\n  var renderActionSpecificHandler = function renderActionSpecificHandler(record) {\n    return __jsx(\"p\", {\n      onClick: function onClick() {\n        return selectProductToSpecificLimit(record);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 16\n      }\n    }, \".....\");\n  };\n\n  var columns = [{\n    dataIndex: 'operation',\n    render: function render(text, record, index) {\n      return renderActionAddDeleteHandler(record, index);\n    }\n  }, {\n    title: 'Product_Code',\n    dataIndex: 'product_type',\n    width: '10%',\n    editable: true\n  }, {\n    title: 'Product_Description',\n    dataIndex: 'product_description',\n    editable: true,\n    render: function render(text, record) {\n      return renderOnclickHandler(text, record);\n    }\n  }, {\n    title: 'All-Channel Txn Limit',\n    dataIndex: 'transaction_limit',\n    editable: true,\n    render: function render(text, record) {\n      return renderOnclickHandler(text, record);\n    }\n  }, {\n    title: 'All-Channel Daily Limit',\n    dataIndex: 'daily_limit',\n    editable: true,\n    render: function render(text, record) {\n      return renderOnclickHandler(text, record);\n    }\n  }, {\n    title: 'Specific Channel Limit',\n    dataIndex: 'Specific',\n    // editable: true,\n    render: function render(text, record) {\n      return renderActionSpecificHandler(text, record);\n    }\n  }];\n  var mergedColumns = columns.map(function (col) {\n    if (!col.editable) {\n      return col;\n    }\n\n    return _objectSpread(_objectSpread({}, col), {}, {\n      onCell: function onCell(record) {\n        return {\n          record: record,\n          inputType: col.dataIndex === 'product_description' ? 'text' : 'number',\n          dataIndex: col.dataIndex,\n          title: col.title,\n          editing: isEditing(record)\n        };\n      }\n    });\n  });\n\n  var detailProduct = function detailProduct() {\n    return __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 11\n      }\n    }, __jsx(_Card, {\n      style: {\n        padding: 8\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 13\n      }\n    }, __jsx(_Row, {\n      gutter: [4, 24],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 15\n      }\n    }, __jsx(_Col, {\n      span: 6,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 17\n      }\n    }, \"Product_Code\"), __jsx(_Col, {\n      span: 12,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 17\n      }\n    }, businessParametersSetupStore.productLimitDetail.product_type)), __jsx(_Row, {\n      gutter: [4, 24],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 15\n      }\n    }, __jsx(_Col, {\n      span: 6,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 17\n      }\n    }, \"Product_Description\"), __jsx(_Col, {\n      span: 12,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 17\n      }\n    }, businessParametersSetupStore.productLimitDetail.product_description))), __jsx(_Card, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 13\n      }\n    }, __jsx(_Row, {\n      gutter: [4, 24],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 15\n      }\n    }, __jsx(_Col, {\n      span: 6,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 17\n      }\n    }, \"All-Channel Txn Limit\"), __jsx(_Col, {\n      span: 12,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 17\n      }\n    }, businessParametersSetupStore.productLimitDetail.transaction_limit)), __jsx(_Row, {\n      gutter: [4, 24],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 15\n      }\n    }, __jsx(_Col, {\n      span: 6,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 17\n      }\n    }, \"All-Channel Daily Limit\"), __jsx(_Col, {\n      span: 12,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 17\n      }\n    }, businessParametersSetupStore.productLimitDetail.daily_limit))), __jsx(_Card, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 13\n      }\n    }, __jsx(_Row, {\n      gutter: [4, 24],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 15\n      }\n    }, __jsx(_Col, {\n      span: 6,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 17\n      }\n    }, \"Channel/Partner\"), __jsx(_Col, {\n      span: 12,\n      flex: 100,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 17\n      }\n    }, __jsx(_Select, {\n      onChange: function onChange(value) {\n        return selectPartnerChanel(value);\n      },\n      style: {\n        width: '100%'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 19\n      }\n    }, channelPartnerList.map(function (item, index) {\n      return __jsx(Option, {\n        key: index,\n        value: item.partner_code,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 62\n        }\n      }, item.partner_code, \"/\", item.partner_abbreviation);\n    })))), showLimitPartner ? __jsx(React.Fragment, null, __jsx(_Row, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 19\n      }\n    }, __jsx(_Col, {\n      span: 6,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 21\n      }\n    }, __jsx(SimpleInput, {\n      readOnly: false,\n      defaultValue: null,\n      prefix: 'Txn Limit',\n      onChange: function onChange(e) {\n        txnLimit = e;\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 23\n      }\n    })), __jsx(_Col, {\n      span: 2,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 21\n      }\n    }, __jsx(\"p\", {\n      style: {\n        paddingTop: 4\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 23\n      }\n    }, \"THB\"))), __jsx(_Row, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 19\n      }\n    }, __jsx(_Col, {\n      span: 6,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 21\n      }\n    }, __jsx(SimpleInput, {\n      readOnly: false,\n      defaultValue: null,\n      prefix: 'Daily Limit',\n      onChange: function onChange(e) {\n        dailyLimit = e;\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 23\n      }\n    })), __jsx(_Col, {\n      span: 2,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 21\n      }\n    }, __jsx(\"p\", {\n      style: {\n        paddingTop: 4\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 23\n      }\n    }, \"THB\")))) : ''), __jsx(_Row, {\n      justify: \"center\",\n      style: {\n        marginTop: 8\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 13\n      }\n    }, __jsx(_Col, {\n      span: 2,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 15\n      }\n    }, __jsx(_Button, {\n      onClick: function onClick() {\n        return goBackProductList();\n      },\n      shape: \"round\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 17\n      }\n    }, \"Back\")), __jsx(_Col, {\n      span: 2,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 15\n      }\n    }, __jsx(_Button, {\n      shape: \"round\",\n      type: \"primary\",\n      onClick: function onClick() {\n        submitChangeProductLimitSelect();\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 17\n      }\n    }, \"Submit\"))), __jsx(SimpleModal, {\n      title: titleModal,\n      type: modalType,\n      onOk: function onOk() {\n        return unlockOTP();\n      },\n      onCancel: function onCancel() {\n        return setVisble(false);\n      },\n      textOk: t(\"confirm\"),\n      textCancel: t(\"cancel\"),\n      modalString: modalString,\n      visible: visible,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 13\n      }\n    }));\n  };\n\n  var productLimitList = function productLimitList() {\n    return __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 11\n      }\n    }, __jsx(_Row, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 13\n      }\n    }, __jsx(_Button, {\n      onClick: function onClick() {\n        return addRowProductList();\n      },\n      type: \"primary\",\n      style: {\n        marginBottom: 16\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 15\n      }\n    }, \"Add a row\")), __jsx(_Row, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 13\n      }\n    }, __jsx(_Col, {\n      flex: 100,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 15\n      }\n    }, __jsx(_Form, {\n      form: form,\n      component: false,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 17\n      }\n    }, __jsx(_Table, {\n      components: {\n        body: {\n          cell: EditableCell\n        }\n      },\n      bordered: true,\n      dataSource: dataSource,\n      columns: mergedColumns,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 409,\n        columnNumber: 19\n      }\n    })))));\n  };\n\n  var addLimitProduct = function addLimitProduct() {\n    return __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 11\n      }\n    }, __jsx(_Row, {\n      gutter: [4, 24],\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 13\n      }\n    }, __jsx(_Col, {\n      span: 6,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 431,\n        columnNumber: 15\n      }\n    }, \"Channel/Partner\"), __jsx(_Col, {\n      span: 12,\n      flex: 100,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 432,\n        columnNumber: 15\n      }\n    }, __jsx(_Select, {\n      onChange: function onChange(value) {\n        return selectPartnerChanel(value);\n      },\n      style: {\n        width: '100%'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 434,\n        columnNumber: 17\n      }\n    }, channelPartnerList.map(function (item, index) {\n      return __jsx(Option, {\n        key: index,\n        value: item.partner_code,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 60\n        }\n      }, item.partner_code, \"/\", item.partner_abbreviation);\n    })))), showLimitPartner ? __jsx(React.Fragment, null, __jsx(_Row, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 17\n      }\n    }, __jsx(_Col, {\n      span: 6,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 445,\n        columnNumber: 19\n      }\n    }, __jsx(SimpleInput, {\n      readOnly: false,\n      defaultValue: null,\n      prefix: 'Txn Limit',\n      onChange: function onChange(e) {\n        txnLimit = e;\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 21\n      }\n    })), __jsx(_Col, {\n      span: 2,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 448,\n        columnNumber: 19\n      }\n    }, __jsx(\"p\", {\n      style: {\n        paddingTop: 4\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 449,\n        columnNumber: 21\n      }\n    }, \"THB\"))), __jsx(_Row, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 17\n      }\n    }, __jsx(_Col, {\n      span: 6,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 19\n      }\n    }, __jsx(SimpleInput, {\n      readOnly: false,\n      defaultValue: null,\n      prefix: 'Daily Limit',\n      onChange: function onChange(e) {\n        dailyLimit = e;\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 21\n      }\n    })), __jsx(_Col, {\n      span: 2,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 456,\n        columnNumber: 19\n      }\n    }, __jsx(\"p\", {\n      style: {\n        paddingTop: 4\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 457,\n        columnNumber: 21\n      }\n    }, \"THB\")))) : '');\n  };\n\n  return viewDetailProduct ? detailProduct() : productLimitList();\n}, \"pCsRMm6A0Cap8GiV3oNOllNaSTU=\", false, function () {\n  return [_Form.useForm];\n})));\nexport default withTranslation('common')(ProductLimitSetup);","map":{"version":3,"sources":["/Users/admin/Desktop/tcrb-ob-project/tcrb-ob-backoffice-frontend/components/business-parameters-setup/product-limit-setup.js"],"names":["React","useState","useEffect","createRef","inject","observer","withTranslation","styled","toJS","SimpleMenu","SimpleInput","SimpleModal","Option","ProductLimitSetup","props","dataSource","setDataSource","viewDetailProduct","setViewDetailProduct","visible","setVisble","modalString","setModalString","showLimitPartner","setShowLimitPartner","editingKey","setEditingKey","titleModal","setTitleModal","modalType","setModalType","selectPartnerAndProduct","setSelectPartnerAndProduct","channelPartnerList","setChannelPartnerList","productList","setProductList","viewSpecificProduct","setViewSpecificProduct","businessParametersSetupStore","t","useForm","form","txnLimit","dailyLimit","isEditing","record","key","edit","setFieldsValue","product_type","product_description","transaction_limit","daily_limit","Specific","EditableCell","editing","dataIndex","title","inputType","index","children","restProps","inputNode","margin","required","message","width","map","item","product_code","getDataProductLimit","getDataChannelPartnerList","getDataProductList","productLimit","length","addKeyToDataSource","then","result","arrayProductLimit","console","log","productLimitDetail","handleDelete","arrayDataSource","newDataSource","Promise","resolve","convertToArrayOptionSelect","arrayObject","partnerList","partner_code","partner_abbreviation","submitChangeLimit","submitChangeProductLimitSelect","textAlign","selectPartnerChanel","value","productSelectObject","filter","selectProductToViewDetail","rowSelected","getDataDetailProductLimit","selectS","addRowProductList","newProduct","goBackProductList","submitAddnewProduct","validateFields","row","status","transaction_code","testFilter","newData","findIndex","splice","push","submitDeleteProduct","detailDataSource","renderOnclickHandler","text","renderActionAddDeleteHandler","e","renderActionSpecificHandler","selectProductToSpecificLimit","columns","render","editable","mergedColumns","col","onCell","detailProduct","padding","paddingTop","marginTop","unlockOTP","productLimitList","marginBottom","body","cell","addLimitProduct"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, createRef } from 'react'\nimport { Button, Table, Popconfirm, Row, Col, Menu, Card, Input, Select, Form, InputNumber } from 'antd'\nimport { inject, observer } from 'mobx-react'\nimport { withTranslation } from '../../i18n'\nimport styled from 'styled-components'\nimport { toJS } from 'mobx'\nimport SimpleMenu from '../simple-menu'\nimport SimpleInput from '../simple-input'\nimport SimpleModal from '../simple-modal'\n\nconst { Option } = Select;\n\nconst ProductLimitSetup =\n  inject('businessParametersSetupStore')\n    (observer((props) => {\n      const [dataSource, setDataSource] = useState([])\n      const [viewDetailProduct, setViewDetailProduct] = useState(false)\n      const [visible, setVisble] = useState(false)\n      const [modalString, setModalString] = useState('')\n      const [showLimitPartner, setShowLimitPartner] = useState(false)\n      const [editingKey, setEditingKey] = useState('')\n      const [titleModal, setTitleModal] = useState('')\n      const [modalType, setModalType] = useState('')\n      const [selectPartnerAndProduct, setSelectPartnerAndProduct] = useState({})\n      const [channelPartnerList, setChannelPartnerList] = useState([])\n      const [productList, setProductList] = useState([])\n      const [viewSpecificProduct, setViewSpecificProduct] = useState(false)\n      const { businessParametersSetupStore, t } = props\n      const [form] = Form.useForm();\n      var txnLimit, dailyLimit = ''\n      // var selectPartnerAndProduct = {}\n\n\n      const isEditing = record => record.key === editingKey;\n      const edit = record => {\n        form.setFieldsValue({\n          product_type: '',\n          product_description: '',\n          transaction_limit: '',\n          daily_limit: '',\n          Specific: '',\n          ...record,\n        });\n        setEditingKey(record.key);\n      };\n      const EditableCell = ({\n        editing,\n        dataIndex,\n        title,\n        inputType,\n        record,\n        index,\n        children,\n        ...restProps\n      }) => {\n        const inputNode = inputType === 'number' ? <InputNumber /> : <Input />;\n        return (\n          <td {...restProps}>\n            {editing ? (\n\n              <Form.Item\n                name={dataIndex == 'product_type' ? 'product_code' : dataIndex}\n                style={{\n                  margin: 0,\n                }}\n                rules={[\n                  {\n                    required: (inputType === 'number') ? true : false,\n                    message: `Please Input ${title}!`,\n                  },\n                ]}\n              >\n                {/* {inputNode} */}\n                {dataIndex == 'product_type' ? (\n                  <Select\n                    style={{ width: '100%' }}\n                  >\n                    {productList.map((item, index) => <Option key={index} value={item.product_code}>{item.product_type}</Option>)}\n                  </Select>) : (\n                    <div>\n                      {inputNode}\n                    </div>\n                  )}\n              </Form.Item>\n            ) : (\n                children\n              )\n            }\n          </td>\n        );\n      };\n\n      useEffect(() => {\n        // setDataSource(mockDataSource)\n        businessParametersSetupStore.getDataProductLimit()\n        businessParametersSetupStore.getDataChannelPartnerList()\n        businessParametersSetupStore.getDataProductList()\n      }, []);\n\n      useEffect(() => {\n        if (businessParametersSetupStore.productLimit.length > 0) {\n          addKeyToDataSource(businessParametersSetupStore.productLimit).then((result) => {\n            businessParametersSetupStore.arrayProductLimit = result\n            setDataSource(result)\n          })\n        }\n      }, [businessParametersSetupStore.productLimit])\n\n      useEffect(() => {\n        //if(businessParametersSetupStore.productLimitDetail)\n        console.log(toJS(businessParametersSetupStore.productLimitDetail))\n        if (businessParametersSetupStore.productLimitDetail != null) {\n          setViewDetailProduct(true)\n        }\n      }, [businessParametersSetupStore.productLimitDetail])\n\n      useEffect(() => {\n        if (businessParametersSetupStore.channelPartnerList.length > 1) {\n          setChannelPartnerList(businessParametersSetupStore.channelPartnerList)\n        }\n      }, [businessParametersSetupStore.channelPartnerList])\n\n      useEffect(() => {\n        if (businessParametersSetupStore.productList.length > 1) {\n          setProductList(businessParametersSetupStore.productList)\n        }\n      }, [businessParametersSetupStore.productList])\n\n      const handleDelete = key => {\n        // const dataSource = [...this.state.dataSource];\n        // setDataSource(dataSource.filter(item => item.key !== key))\n        console.log(key)\n\n      };\n\n      const addKeyToDataSource = (arrayDataSource) => {\n        let newDataSource = arrayDataSource\n        for (let index = 0; index < newDataSource.length; index++) {\n          newDataSource[index].key = index + 1;\n        }\n        return new Promise((resolve) => {\n          resolve(newDataSource)\n        })\n      }\n\n      const convertToArrayOptionSelect = (arrayObject) => {\n        let result = arrayObject.map(partnerList => [partnerList.partner_code, partnerList.partner_code + '/' + partnerList.partner_abbreviation]);\n        return new Promise((resolve) => resolve(result))\n      }\n\n      const submitChangeLimit = () => {\n        // txnLimit, dailyLimit\n        // call api\n      }\n\n      const submitChangeProductLimitSelect = () => {\n        //call api\n        setVisble(true)\n        setTitleModal('Confirm')\n        setModalType(\"confirm\")\n        setModalString(\n          <div style={{ textAlign: \"center\" }}>\n            <p> Change Product Code {selectPartnerAndProduct.partner_code} Limit </p>\n            <p>for {selectPartnerAndProduct.partner_code}/{selectPartnerAndProduct.partner_abbreviation} Channel/Partner !!!</p>\n          </div>\n        )\n      }\n\n      const selectPartnerChanel = (value) => {\n        let productSelectObject = channelPartnerList.filter(item => item.partner_code == value)\n        setSelectPartnerAndProduct(productSelectObject[0])\n        //partner_code, product_code\n        setShowLimitPartner(true)\n      }\n\n      const selectProductToViewDetail = (rowSelected) => {\n        //call api to get Detail Product\n        businessParametersSetupStore.getDataDetailProductLimit(rowSelected.product_code)\n        // businessParametersSetupStore.getDataChannelPartnerList()\n      }\n\n      const selectS = () => {\n        viewSpecificProduct\n      }\n\n      const addRowProductList = () => {\n        let newProduct = {\n          key: dataSource.length + 1,\n          product_code: '',\n          product_description: '',\n          transaction_limit: '',\n          daily_limit: '',\n          Specific: '',\n        }\n        setDataSource([...dataSource, newProduct])\n        edit(newProduct)\n        businessParametersSetupStore.arrayProductLimit = dataSource\n      }\n      const goBackProductList = () => {\n        setViewDetailProduct(false)\n      }\n      const submitAddnewProduct = async (key) => {\n        // Call api to update record status\n        const row = await form.validateFields();\n        row.status = 2\n        row.transaction_code = \"6931\"\n        let testFilter = productList.filter(item => (row.product_code === item.product_code))\n        console.log(toJS(testFilter))\n        console.log(row)\n        const newData = [...dataSource];\n        const index = newData.findIndex(item => key === item.key);\n        if (index > -1) {\n          const item = newData[index];\n          newData.splice(index, 1, { ...item, ...row });\n          setDataSource(newData);\n          setEditingKey('');\n        } else {\n          newData.push(row);\n          setDataSource(newData);\n          setEditingKey('');\n        }\n        //businessParametersSetupStore.addNewProductLimit(row)\n      }\n\n      const submitDeleteProduct = (record) => {\n        //call api to update record status\n        dataSource.map(detailDataSource => {\n          if (detailDataSource.key === record.key) {\n            record.status = 2\n          }\n        })\n        console.log(toJS(dataSource))\n        //businessParametersSetupStore.deleteProductLimit(record)\n        setDataSource(dataSource) //<<waiting result api and  add key index\n      }\n      const renderOnclickHandler = (text, record) => {\n        return <p onClick={() => selectProductToViewDetail(record)}>{text}</p>\n      }\n      const renderActionAddDeleteHandler = (record, index) => {\n        if (index + 1 <= businessParametersSetupStore.arrayProductLimit.length) {\n          return <Popconfirm title=\"Sure to delete?\" onConfirm={(e) => { submitDeleteProduct(record) }} disabled={editingKey !== ''}>\n            <a>Delete</a>\n          </Popconfirm>\n        } else if (record.status === 2) {\n          return null\n        } else {\n          return <Popconfirm title={\"Confirm to add !!!\"} onConfirm={() => { submitAddnewProduct(record.key) }} >\n            <a>confirm</a>\n          </Popconfirm>\n        }\n      }\n      const renderActionSpecificHandler = (record) => {\n        return <p onClick={() => selectProductToSpecificLimit(record)} >.....</p>\n      }\n      const columns = [\n        {\n          dataIndex: 'operation',\n          render: (text, record, index) =>\n            renderActionAddDeleteHandler(record, index)\n        },\n        {\n          title: 'Product_Code',\n          dataIndex: 'product_type',\n          width: '10%',\n          editable: true,\n        },\n        {\n          title: 'Product_Description',\n          dataIndex: 'product_description',\n          editable: true,\n          render: (text, record) => renderOnclickHandler(text, record)\n        },\n        {\n          title: 'All-Channel Txn Limit',\n          dataIndex: 'transaction_limit',\n          editable: true,\n          render: (text, record) => renderOnclickHandler(text, record)\n        },\n        {\n          title: 'All-Channel Daily Limit',\n          dataIndex: 'daily_limit',\n          editable: true,\n          render: (text, record) => renderOnclickHandler(text, record)\n        },\n        {\n          title: 'Specific Channel Limit',\n          dataIndex: 'Specific',\n          // editable: true,\n          render: (text, record) => renderActionSpecificHandler(text, record)\n\n        },\n      ];\n\n      const mergedColumns = columns.map(col => {\n        if (!col.editable) {\n          return col;\n        }\n\n        return {\n          ...col,\n          onCell: record => ({\n            record,\n            inputType: col.dataIndex === 'product_description' ? 'text' : 'number',\n            dataIndex: col.dataIndex,\n            title: col.title,\n            editing: isEditing(record),\n          }),\n        };\n      });\n\n\n      const detailProduct = () => {\n        return (\n          <div>\n            <Card style={{ padding: 8 }}>\n              <Row gutter={[4, 24]}>\n                <Col span={6}>Product_Code</Col>\n                <Col span={12}>{businessParametersSetupStore.productLimitDetail.product_type}</Col>\n              </Row>\n              <Row gutter={[4, 24]}>\n                <Col span={6}>Product_Description</Col>\n                <Col span={12}>{businessParametersSetupStore.productLimitDetail.product_description}</Col>\n              </Row>\n            </Card>\n            <Card>\n              <Row gutter={[4, 24]}>\n                <Col span={6}>All-Channel Txn Limit</Col>\n                <Col span={12}>{businessParametersSetupStore.productLimitDetail.transaction_limit}</Col>\n              </Row>\n              <Row gutter={[4, 24]}>\n                <Col span={6}>All-Channel Daily Limit</Col>\n                <Col span={12}>{businessParametersSetupStore.productLimitDetail.daily_limit}</Col>\n              </Row>\n            </Card>\n            <Card>\n              <Row gutter={[4, 24]}>\n                <Col span={6}>Channel/Partner</Col>\n                <Col span={12} flex={100}>\n                  {/* <SimpleMenu options={optionList} onChange={(e) => { selectPartnerChanel(e) }} /> */}\n                  <Select\n                    onChange={(value) => selectPartnerChanel(value)}\n                    style={{ width: '100%' }}\n                  >\n                    {channelPartnerList.map((item, index) => <Option key={index} value={item.partner_code}>{item.partner_code}/{item.partner_abbreviation}</Option>)}\n                  </Select>\n                </Col>\n              </Row>\n              {(showLimitPartner) ? (\n                <>\n                  <Row>\n                    <Col span={6}>\n                      <SimpleInput readOnly={false} defaultValue={null} prefix={'Txn Limit'} onChange={(e) => { txnLimit = e }} />\n                    </Col>\n                    <Col span={2}>\n                      <p style={{ paddingTop: 4 }}>THB</p>\n                    </Col>\n                  </Row>\n                  <Row>\n                    <Col span={6}>\n                      <SimpleInput readOnly={false} defaultValue={null} prefix={'Daily Limit'} onChange={(e) => { dailyLimit = e }} />\n                    </Col>\n                    <Col span={2}>\n                      <p style={{ paddingTop: 4 }}>THB</p>\n                    </Col>\n                  </Row>\n\n                </>\n              ) : ('')}\n\n            </Card>\n            <Row justify=\"center\" style={{ marginTop: 8 }}>\n              <Col span={2}>\n                <Button onClick={() => goBackProductList()} shape=\"round\">Back</Button>\n              </Col>\n              <Col span={2}>\n                <Button shape=\"round\" type=\"primary\" onClick={() => { submitChangeProductLimitSelect() }}>Submit</Button>\n              </Col>\n            </Row>\n            <SimpleModal\n              title={titleModal}\n              type={modalType}\n              onOk={() => unlockOTP()}\n              onCancel={() => setVisble(false)}\n              textOk={t(\"confirm\")}\n              textCancel={t(\"cancel\")}\n              modalString={modalString}\n              visible={visible}\n            />\n          </div>\n        )\n      }\n\n      const productLimitList = () => {\n        return (\n          <div>\n            <Row>\n              <Button\n                onClick={() => addRowProductList()}\n                type=\"primary\"\n                style={{\n                  marginBottom: 16,\n                }}\n              >Add a row</Button>\n            </Row>\n            <Row>\n              <Col flex={100}>\n                <Form form={form} component={false}>\n\n                  <Table\n                    components={{\n                      body: {\n                        cell: EditableCell,\n                      },\n                    }}\n                    bordered\n                    dataSource={dataSource}\n                    columns={mergedColumns}\n                  />\n                </Form>\n              </Col>\n\n            </Row>\n          </div>\n        )\n      }\n\n      const addLimitProduct = () => {\n        return (\n          <div>\n            <Row gutter={[4, 24]}>\n              <Col span={6}>Channel/Partner</Col>\n              <Col span={12} flex={100}>\n                {/* <SimpleMenu options={optionList} onChange={(e) => { selectPartnerChanel(e) }} /> */}\n                <Select\n                  onChange={(value) => selectPartnerChanel(value)}\n                  style={{ width: '100%' }}\n                >\n                  {channelPartnerList.map((item, index) => <Option key={index} value={item.partner_code}>{item.partner_code}/{item.partner_abbreviation}</Option>)}\n                </Select>\n              </Col>\n            </Row>\n            {(showLimitPartner) ? (\n              <>\n                <Row>\n                  <Col span={6}>\n                    <SimpleInput readOnly={false} defaultValue={null} prefix={'Txn Limit'} onChange={(e) => { txnLimit = e }} />\n                  </Col>\n                  <Col span={2}>\n                    <p style={{ paddingTop: 4 }}>THB</p>\n                  </Col>\n                </Row>\n                <Row>\n                  <Col span={6}>\n                    <SimpleInput readOnly={false} defaultValue={null} prefix={'Daily Limit'} onChange={(e) => { dailyLimit = e }} />\n                  </Col>\n                  <Col span={2}>\n                    <p style={{ paddingTop: 4 }}>THB</p>\n                  </Col>\n                </Row>\n\n              </>\n            ) : ('')}\n          </div>\n        )\n      }\n      return (viewDetailProduct) ? detailProduct() : productLimitList()\n    }))\nexport default withTranslation('common')(ProductLimitSetup)\n"]},"metadata":{},"sourceType":"module"}